!function(){return function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){return o(e[a][1][t]||t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}}()({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e.exports=[{id:"raven1",name:"Raven's Adventure I",rootTableDef:{root:[[1,{encounterId:"cultistsMeeting",beatId:"discussion"}]]},initialState:{hp:27,gp:126,str:6,cha:16}},{id:"ravenWoods",name:"Raven: Intrigue in the Woods",rootTableDef:{root:[[1,{encounterId:"woodsIntrigue",beatId:"gooseGnomeStandoff"}]]},initialState:{hp:27,gp:126,cha:16}}]},{}],2:[function(t,e,n){var r=t("handle-error-web"),o=t("route-state"),i=t("./flows/beat-flow"),a=t("./flows/adventure-selection-flow"),s=t("./package.json").version,u=t("tablenest").Tablenest,c=t("seedrandom"),l=t("one-listener-per-element"),f=t("csscrown"),h=t("./adventures"),p=t("lodash.findwhere"),d=document.getElementById("adventure-title"),y=f({crownClass:"active-root"}),v=l().on,_=[[]],g=o({followRoute:function(t){var e=t.seed,n=t.advId,r=t.encounterId,o=t.beatIds;if(!e)return void g.addToRoute({seed:(new Date).toISOString()});if(!n)return y(document.getElementById("adventure-selection-container-container")),void a({addToRoute:g.addToRoute,adventures:h});var s=p(h,{id:n});s.state||m(s);d.textContent=s.name,v("#restart-link","click",function(){m(s),_.push([]),g.overwriteRouteEntirely({advId:n})}),v("#change-adventure-link","click",function(){m(s),_.push([]),g.overwriteRouteEntirely({})});var l=c(e);if(!r){var f=u({random:l}),b=f(s.rootTableDef),x=b(),w=x.encounterId,k=x.beatId;return void g.addToRoute({encounterId:w,beatIds:k})}var T=[];o&&(T=o.split("|").map(decodeURIComponent));y(document.getElementById("adventure-container")),i({encounterId:r,beatIds:T,addToRoute:g.addToRoute,random:l,state:s.state,actionLogs:_})},windowObject:window,propsToCoerceToBool:["hideUI","debug"]});function m(t){t.state=Object.assign({},t.initialState)}function b(t,e,n,o,i){r(i)}document.getElementById("version-info").textContent=s,window.onerror=b,g.routeFromHash()},{"./adventures":1,"./flows/adventure-selection-flow":11,"./flows/beat-flow":12,"./package.json":66,csscrown:18,"handle-error-web":27,"lodash.findwhere":41,"one-listener-per-element":48,"route-state":56,seedrandom:57,tablenest:65}],3:[function(t,e,n){e.exports={playthroughs:"plimsolled-eotomariids-magnetify-authenticities"}},{}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=t("d3-selection"),i=t("accessor"),a=t("@jimkang/torn-edges"),s=o.select(".adventure-selection-container");n.renderAdventureSelection=function(t){var e=t.adventures,n=t.onAdventureSelection,o=s.select(".paper");o.empty()&&(r=a({parentEl:s.node(),contentClassName:"paper",pathFill:"hsl(39.4, 47.1%, 73.3%)"}),(o=s.select(".paper")).append("ul").classed("adventure-selection-root",!0));var u=o.select(".adventure-selection-root").selectAll(".choice").data(e,i());u.exit().remove(),u.enter().append("li").classed("choice",!0).merge(u).text(i("name")).on("click",function(t){n({advId:t.id})}),r(),s.classed("hidden",!1)}},{"@jimkang/torn-edges":14,accessor:15,"d3-selection":21}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=t("d3-selection"),i=t("accessor"),a=t("@jimkang/torn-edges"),s=o.select("#beat-container").select(".setup-container");n.renderBeat=function(t){var e=t.beat,n=t.onPlayerAction,u=s.select(".paper");if(u.empty()&&(r=a({parentEl:s.node(),contentClassName:"paper",pathFill:"hsl(39.4, 47.1%, 73.3%)"}),u=s.select(".paper")),s.classed("hidden",!1),u.selectAll("*").remove(),u.html(e.desc),e.img&&u.insert("img",":first-child").classed("picture",!0).attr("src",e.img).attr("alt",e.imgAlt),e.question&&u.append("span").classed("question",!0).text(e.question),e.playerOptions)if(e.playerOptions.choices)u.append("ul").classed("choices",!0).selectAll(".choice").data(e.playerOptions.choices,i()).enter().append("li").classed("choice",!0).text(i("desc")).on("click",function(t){o.select(this).classed("selected",!0),n({choice:t})});else if(e.playerOptions.freeText){var c=u.append("div").classed("free-text-container",!0).classed("centered-col",!0);c.append("div").classed("free-text-hint",!0).text(e.playerOptions.freeText.hint),c.append("textarea").classed("free-text",!0),c.append("button").text("Done").classed("continue-button",!0).classed("free-text-button",!0).on("click",function(){e.playerOptions.freeText.value=u.select(".free-text").node().value,n({freeText:e.playerOptions.freeText})})}r()}},{"@jimkang/torn-edges":14,accessor:15,"d3-selection":21}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=t("d3-selection"),i=t("@jimkang/torn-edges"),a=o.select("#beat-container").select(".resolution-container");n.renderResolution=function(t){var e=t.resolutionText,n=t.onAcknowledge,o=a.select(".paper");o.empty()&&(r=i({parentEl:a.node(),contentClassName:"paper",pathFill:"hsl(39.4, 47.1%, 73.3%)"}),o=a.select(".paper")),a.classed("hidden",!1),o.selectAll("*").remove();var s=o.append("div");s.html(e),n&&o.append("button").classed("continue-button",!0).text("Continue.").on("click",function(){a.classed("hidden",!0),n()}),r(),setTimeout(function(){return s.node().scrollIntoView()},300)}},{"@jimkang/torn-edges":14,"d3-selection":21}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.cultistsMeeting={discussion:{id:"discussion",img:"media/cultists.jpg",imgAlt:"A picture of three guys",desc:"<p>Three people in robes sit at the next table in the common room. They are having a heated discussion but are straining to keep it quiet, only partially sucessfully.</p>",question:"What do you do?",playerOptions:{choices:[{id:"spy",desc:"Eavesdrop without being noticed (DEX check with +3 bonus)",next:function(t){var e=t.probable.rollDie(20),n="[DEX check: "+e+"]",r="introductions";return e<=11?(n+=" They don't seem to notice you.",r="waitingFor"):n+=" One of the robed people turns to you.",{beatId:r,resolutionText:n}}},{id:"introduce",desc:"Introduce yourself.",next:function(){return{beatId:"introductions"}}}]}},introductions:{id:"introductions",desc:'A robed halfing nods at you. "I am Shillana. These are my spiritual siblings, Alabie Ella, and Isry. We live to spread the cleansing truth of fire!" Who might you be?"<br>',question:"How do you introduce yourself?",playerOptions:{freeText:{id:"introName",hint:"Your name here",next:function(t){var e='"Good to meet you."',n="recruitment";return t.freeText.value.toLowerCase().trim().includes("unaanne")&&(n="cadre",e='"Unaanne! Finally! We have much to talk about!'),{beatId:n,resolutionText:e}}}}},waitingFor:{id:"waitingFor",desc:'A robed halfling pounds the table. "Stop this! This is needless. This will all be settled in a few moments when the agent from the Plane arrives. What was her name again?"\n<p>"Unaanne. That is the name she takes in mortal form," replies a robed human.</p><p>"Yes, Unaanne will tell us when the new leadership cadre will arrive."</p><p>They all fall silent.</p>',question:"What do you do next?",playerOptions:{choices:[{id:"introduce",desc:"Introduce yourself.",next:function(){return{beatId:"introductions"}}},{id:"leaveRoom",desc:"Leave the common room.",next:function(){return{encounterId:"itemMartAnalysts",beatId:"doorKnock",resolutionText:"You leave and go back to your room."}}}]}},recruitment:{id:"recruitment",desc:'"I tell you my friend. There will be judgment for us all and fire for us all. But! That fire can good! It can be your greatest friend!"\n<p>Another robed person chimes in. "Indeed. And water, earth, air, these are the filthy elements. The ones that are impure. We wage war against them!"</p>\n<p>The third robee speaks. "You may have heard that the forces of fire have been dealt a blow. That much is true. But that is a minor dip in our flame. We are rekindling! We are burning sacrifices in the Temple in a few days hence! Have you a sacrifice that you would like us to burn? It will strengthen your soul as it does the forces of Fire!"',question:"What, if anything, do give them?",playerOptions:{freeText:{id:"fireSacrifice",hint:"Write (or don't) an item you want to give them here.",next:function(t){var e="";return t.freeText.value.trim().length>0&&(e+='"Thank you. Fire cleanse your soul!" '),{encounterId:"itemMartAnalysts",beatId:"doorKnock",resolutionText:e+="The cultists soon leave. You leave and go back to your room."}}}}},cadre:{id:"cadre",desc:'"Unaane, we beseech you! We have been lost since the Water fiends destroyed our leaders. We suspect the trolls helped them," says the robed halfling.\n<p>The robed human adds, "And yet more \'heroes\' are poking around the Temple. The latest horde may have actually killed Falrinth and Smigal. It\'s a matter of time until they encroach on our territory. We must destroy them soon!"</p>\n<p>"Where is the new leadership cadre of which we have been foretold? How can we find them?"</p>',question:"What do you tell them?",playerOptions:{freeText:{id:"advice",hint:"Write your prophecy/advice/poems here.",next:function(){return{encounterId:"itemMartAnalysts",beatId:"doorKnock",resolutionText:"We will meditate on this! Fire cleanse your soul!<p>They get up and leave, and you head back to your room."}}}}}}},{}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./cultists-meeting"),o=t("./item-mart-analysts"),i=t("./woods-intrigue");n.encounterDict={cultistsMeeting:r.cultistsMeeting,itemMartAnalysts:o.itemMartAnalysts,woodsIntrigue:i.woodsIntrigue}},{"./cultists-meeting":7,"./item-mart-analysts":9,"./woods-intrigue":10}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.itemMartAnalysts={doorKnock:{id:"doorKnock",img:"media/fred-and-joe.jpg",imgAlt:"A picture of two guys",desc:"Fred and Joe from Item Mart are at the door of your inn room!\n          <p>They describe themselves as Growth Opportunity Analysts. They are interested in your experiences with the Temple of Elemental Evil.\n          <p>They mention that they want to pay you a 50 gp consulting fee.</p>",question:"What do you do?",playerOptions:{choices:[{id:"goAway",desc:"Tell them to go away.",condition:function(t){return!t.state.paymentAccepted},next:function(t){return t.state.itemMartAgentsDismissed=!0,{beatId:"sulk"}}},{id:"askFor100",desc:"Ask for 100 gp.",condition:function(t){return!t.state.itemMartHagglingDone},next:function(t){var e=t.state,n=t.probable;e.itemMartHagglingDone=!0;var r=n.rollDie(20),o="[CHA check: "+r+"]",i="doorKnock";return r<=15?(e.gp+=100,o+=" They give you 100 gp.",e.paymentAccepted=!0,i="scouting"):o+=' "Sorry. That\'s not in our budget."',{beatId:i,resolutionText:o}}},{id:"inviteIn",desc:"Invite them in.",next:function(t){return t.state.gp+=50,{beatId:"scouting",resolutionText:"They give you 50 gp."}}}]}},end:{id:"end",desc:"You go back to sleep. The end."},scouting:{id:"scouting",desc:'"We\'ve seen that the Temple is a popular destination for high income individuals! At the same time, the supply of convenience &mdash; and luxury &mdash; goods is low," Fred explains.\n<p>Joe continues "Now, Mogredh, you and your team have spent considerable time scouting the Temple. We\'re very excited about the unique perspective you have as a Temple SME with a background at Item Mart as a \n<em>[glances at paper]</em>\nService Associate I."</p>\n<p>"We\'re going to put a feeler out into this market by running a kiosk for a week!</p>',question:'"As an expert on the Temple and convenience markets, where do you think we should set up our kiosk in order to optimize for both traffic and safety?"',playerOptions:{choices:[{id:"outsideKiosk",desc:"Close to the Temple, but not inside of it.",next:function(){return{beatId:"stock"}}},{id:"firstFloorKiosk",desc:"In the grand hall on the ground floor.",next:function(){return{beatId:"stock"}}},{id:"dungeonLevel1Kiosk",desc:"The first underground level of the Temple.",next:function(){return{beatId:"stock"}}}]}},stock:{id:"stock",desc:'"We have a budget of 300 gp for this venture. We\'d love to get your opinion on spend prioritization!"\n    <p>Fred holds unrolls the budget scroll, which reads as follows:</p>\n<ul>\n  <li>Climbing supply box (ropes, spikes, grappling hooks): 20 gp</li>\n  <li>Lighting box (lanterns, torches, oil, tinder kits): 10 gp</li>\n  <li>Ammo box (flight arrows, quarrels, and darts): 10 gp</li>\n  <li>Potion of Healing: 200 gp (retail for 300 gp)</li>\n  <li>Worg Juice keg: 50 gp</li>\n  <li>Dry rations (100) box: 50 gp</li>\n  <li>Fully closeable and lockable kiosk upgrade: 100 gp</li>\n  <li>Guard: 30 gp each</li>\n  <li>Cleric: 225 gp</li>\n  <li>Elite guard: 150 gp</li>\n</ul>',question:"How should we budget this?",playerOptions:{freeText:{id:"kioskBudget",hint:"Write your budget recommendation here.",next:function(){return{beatId:"consignment"}}}}},consignment:{id:"consignment",desc:'"BTW, we have a consignment slot open at the kiosk!"',question:'"Is there anything you\'d like to sell? Item Mart takes 20%."',playerOptions:{freeText:{id:"consignmentItem",hint:"Write down what you'd like to give to them to sell and at what price.",next:function(){return{beatId:"analystGoodbye"}}}}},analystGoodbye:{id:"analystGoodbye",desc:'"It was a pleasure working with you, Mogredh. We\'ll let you know how things pan out with the kiosk. And if things don\'t work out with the "adventuring", there may be an opportunity for you in Management in this region very soon [wink]!"\n<p>With that, Fred and Joe roll up their papers and head out with an optimistic swagger.</p>',endOfEncounter:!0},sulk:{id:"sulk",desc:"You shut the door and go back to sulking. It's a good sulk. The end.",endOfEncounter:!0}}},{}],10:[function(t,e,n){"use strict";function r(t,e){var n="<p>Ewmis flies into a rage and attacks you, and his comrades back him up!";if(e.rollDie(20)<=t.str)n+=" However, you are the superior combatant today. You kill them before they can land a sword on you.";else{var r=e.rollDie(6)+e.rollDie(6);t.hp-=r,n+=" You manage to kill them, but not without taking wounds amounting to <strong>"+r+" damage</strong>, leaving you with "+t.hp+" hp!",t.gnomesLeft=!0}return{resolutionText:n}}function o(t){return{id:"examineSpike",desc:"Examine the spike.",condition:function(t){return"pc"===t.state.spikeOwner},next:function(e){var n=e.state;return n.spikeExamined=!0,n.hasCube=!0,{beatId:t,resolutionText:'<p>The brown spike is perfectly cylindrical, except at its point and at the cap, which you now notice twists off.</p>\n<p>Inside, you find the following:</p>\n<ul>\n<li>A cube made of hardened mud. On one side, there is an etching of two wavy circles that overlap each other. <img alt="wavy circles" src="media/wavy-circles.jpg"></li>\n<li>A note that reads "<em>🐐 -> 🗣️ It is time to reap</em>"</li>\n<li>A note that reads "<em>🔴 -> 🗣️ Continue to sow</em>"</li>\n<li>A note that reads "<em>🧙: 💀</em>"</li>\n<li>A note that reads "<em>🧝: 💀??</em>"</li>\n\x3c!--<li>A map to a particular tree in the woods</li>--\x3e\n</ul>'}}}}Object.defineProperty(n,"__esModule",{value:!0}),n.woodsIntrigue={gooseGnomeStandoff:{id:"gooseGnomeStandoff",img:"media/geesevgnomes.png",imgAlt:"A bunch of geese, a bunch of gnomes, a bunch of bad vibes",desc:'<p>Walking through the woods at night, as a goth druid is wont to do, you come across an unusual commotion.</p>\n<p>A group of geese and a group of gnomes are yelling at each other and taking threatening postures. It seems as though a large brown spike between them is at the center of the dispute.</p>\n<p>As you approach, they turn to you.</p>\n<p>"Foul goose! How dare you dig up my spike?!" cries a gnome in a red hat. "Yeah, leave Ewmis\'s spike alone!" adds the gnome in the green hat. "Why were you spiking, anyway, Ewmis?" inquires the third gnome, who is ignored.</p>\n<p>"HONK!" honk the geese, as they flap furiously.</p>\n',question:"Tensions are high. They all look at you expectantly.",playerOptions:{choices:[{id:"giveToGnomes",desc:'Pick up the spike and hand it to the gnome Ewmis, risking a fight with the geese. "You are the rightful spike holder."',oneTime:!0,condition:function(t){var e=t.state;return!e.spikeOwner&&!e.gnomesLeft},next:function(t){var e=t.state,n=t.probable,r='"I knew forest justice would be served", Ewmis says as he takes the spike. The gnomes disappear into the night.';if(e.spikeOwner="ewmis",e.gnomesLeft=!0,n.rollDie(20)<=e.cha-3)r+=" The geese grouse a bit.";else{var o=n.rollDie(6);e.hp-=o,r+="<p>The geese furiously peck at you for <strong>"+o+" damage</strong> before flying off, leaving you with "+e.hp+" hp!</p>",e.geeseLeft=!0}return{beatId:"gooseGnomeStandoff",resolutionText:r}}},{id:"giveToGeese",desc:'Pick up the spike and give it to the geese, risking a fight with the gnomes. "You are right to protect the earth from this spike. Here is your reward."',oneTime:!0,condition:function(t){var e=t.state;return!e.spikeOwner&&!e.geeseLeft},next:function(t){var e=t.state,n=t.probable;e.spikeOwner="goose",e.geeseLeft=!0;var o='"HONK!" The geese flap righteously and carry the spike off into the skies.';n.rollDie(20)<=e.cha-5?o+="\n<p>The red-hatted gnome stares in shock for a moment. His comrades pull him away. \"C'mon, Ewmis. We can get another spike back in town. Besides, we weren't actually going to camp here another night, anyway.\"</p>":o+=r(e,n).resolutionText;return{beatId:"gooseGnomeStandoff",resolutionText:o+="</p>"}}},{id:"takeSpike",desc:"Risk a fight with both parties and take the spike for yourself.",condition:function(t){var e=t.state;return!(e.spikeOwner||e.geeseLeft&&e.gnomesLeft)},next:function(t){var e=t.state,n=t.probable,o="Both the gnomes and geese stare at you in shock.";e.spikeOwner="pc";var i=n.rollDie(20);if(i<=e.cha-5)o+=" But as agitated as they are, they seem to respect your authority in this matter and just watch quietly as you take possession of the spike.";else if(i<=e.cha-3){if(o+=" The geese back off as you quietly take possession of the spike, but the gnomes take up arms.",e.ewmisCharmed)o+="<p>But then, Ewmis steps up and says, hey, guys, don't worry. I think she's OK.</p>";else o+=r(e,n).resolutionText}else if(!e.ewmisCharmed){if(o+=" All parties are not OK with that! The gnomes take up arms, and the geese fly at you!",n.rollDie(20)<=e.str-1)o+=" However, you are the superior combatant today. You kill the gnomes and scatter the geese before they can land a sword or beak on you.";else{var a=n.rollDie(6)+n.rollDie(6)+n.rollDie(6);e.hp-=a,o+=" You manage to kill the gnomes and chase off the geese, but not without taking wounds amounting to <strong>"+a+" damage</strong>, leaving you with "+e.hp+" hp!",e.gnomesLeft=!0,e.geeseLeft=!0}}return{resolutionText:o,beatId:"gooseGnomeStandoff"}}},{id:"askGnomeAboutSpike",desc:"Ask the gnome what he was doing with the spike.",condition:function(t){return!t.state.gnomesLeft},next:function(t){var e,n=t.state;return n.ewmisCharmed?(e='<p>Ewmis grins. "Glad you asked! Well, I just joined this new group called OmniMud. They\'re really going to change things around here, I think! Right now, no one in one part of the woods knows anything about things going on in other parts of the woods or in the Temple, right?</p>\n<p>Well, when you join OmniMud, you do get to know. For example, I found out that Olonka takes the herbs we gather over to Nulb and sells them to crones for twenty times what she pays us.</p>\n<p>"All I have to do is take a spike from Ourtram, my new life coach over at OmniMud, and then bury them over by the boulder on the pond each week."</p>\n<p>This all looks like news to the other gnomes. The gnome in the blue hat protests, "But what about finding good spots for the tent?"</p>\n<p>"Well, I wasn\'t sure if you were ready for the OmniMud Way yet, so that was what we call a \'Truth Primer.\'"</p>',n.ewmisRevealedOmniMud=!0,n.boulderOnPondKnown=!0):e='<p>"Well, I couldn\'t sleep, and I was just trying to find a good site for our tents for tomorrow," replies the gnome Ewmis.</p><p>The gnome in the blue hat seems nonplussed.</p>',{beatId:"gooseGnomeStandoff",resolutionText:e}}},{id:"speakWithGeese",desc:"Cast Speak with Animals, then ask the geese why they want the spike.",oneTime:!0,condition:function(t){return!t.state.geeseLeft},next:function(){return{beatId:"gooseGnomeStandoff",resolutionText:'<em>You cast the spell, and the honks become imbued with meaning.</em>\n<p>"We found this nervous gnome! He had a thing! We took its thing!" honks one goose.</p>\n<p>"Yeah!" honks another goose.</p>\n<p>"HELLS YEAH!" honks the third goose.</p>'}}},{id:"charmGnome",desc:"Cast Charm Person or Mammal on the gnome Ewmis (he gets a save and will notice you casting).",oneTime:!0,condition:function(t){return!t.state.gnomesLeft},next:function(t){var e=t.state;return e.ewmisCharmed=!0,{beatId:"gooseGnomeStandoff",resolutionText:"The gnomes' brows furrow with suspicion, except for Ewmis who relaxes and smiles for the first time you've seen. The geese honk."}}},o("gooseGnomeStandoff"),{id:"toTrail",desc:"Walk away along the trail.",next:function(){return{beatId:"boulderPond"}}},{id:"toBoulder",desc:"Walk to the boulder on the pond that Ewmis described.",condition:function(t){return t.state.boulderOnPondKnown},next:function(){return{beatId:"boulderPond"}}}]}},writeSpikeNotes:{id:"writeSpikeNotes",desc:'<p>You take some paper and a quill from your pack to write new notes to replace the notes in the spike.</p>\n<p>The original notes were:</p>\n<ul>\n<li>"<em>🐐 -> 🗣️ It is time to reap</em>"</li>\n<li>"<em>🔴 -> 🗣️ Continue to sow</em>"</li>\n<li>"<em>🧙: 💀</em>"</li>\n<li>"<em>🧝: 💀??</em>"</li>\n</ul>',question:"What do you write in your notes?",playerOptions:{freeText:{id:"spikeNotesText",hint:"Write down what the new notes should say here.",next:function(){return{beatId:"boulderPond"}}}}},boulderPond:{id:"boulderPond",desc:'<p>You make your way to a pond with a prominent boulder next to it. Next to that prominent boulder are signs of a struggle. There are small bloodstains on the boulder, divots in the grass, and large feathers.</p>\n<p>There is a 1" diameter hole in the ground amidst the scuffle signs.</p>',question:"What do you do?",playerOptions:{choices:[o("boulderPond"),{id:"replaceSpikeNotesText",condition:function(t){var e=t.state;return"pc"===e.spikeOwner&&!0===e.spikeExamined},desc:"Replace the notes in the spike.",next:function(){return{beatId:"writeSpikeNotes"}}},{id:"dropSpike",condition:function(t){return"pc"===t.state.spikeOwner},oneTime:!0,desc:"Drive the spike into the hole.",next:function(t){var e=t.state;return e.spikeOwner="agent",{beatId:e.hasMapToHollow?"boulderPond":"endWoods",resolutionText:"It fits perfectly."}}}]}},endWoods:{id:"endWoods",desc:"Satisfied that your business in the woods has concluded tonight, you head back to Nulb.",endOfEncounter:!0}}},{}],11:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../dom/render-adventure-selection");e.exports=function(t){var e=t.adventures,n=t.addToRoute;return r(this,void 0,void 0,function(){function t(t){var e=t.advId;n({advId:e})}return o(this,function(n){return i.renderAdventureSelection({adventures:e,onAdventureSelection:t}),[2]})})}},{"../dom/render-adventure-selection":4}],12:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../dom/render-beat"),a=t("../dom/render-resolution"),s=t("probable").createProbable,u=t("../tasks/send-encounter"),c=t("errorback-promise"),l=t("lodash.findwhere"),f=t("lodash.clonedeep"),h=t("../encounters");e.exports=function(t){var e=t.encounterId,n=t.beatIds,p=t.addToRoute,d=t.random,y=t.state,v=t.actionLogs;return r(this,void 0,void 0,function(){function t(e){var o,s=e.choice,u=e.freeText;function c(){var t={beatIds:n.map(encodeURIComponent).join("|")};o.encounterId&&(t.encounterId=o.encounterId),p(t)}s?o=s.next({state:y,beat:b,probable:g,choice:s}):u&&(o=u.next({state:y,beat:b,probable:g,freeText:u})),n.push(o.beatId),_.push(s||u),_.push(o),console.log("actionLog",JSON.stringify(_,null,2)),r(b),i.renderBeat({beat:b,onPlayerAction:t}),o.resolutionText?a.renderResolution({resolutionText:o.resolutionText,onAcknowledge:c}):c()}function r(t){t.playerOptions&&(t.playerOptions.choices&&(t.playerOptions.choices=t.playerOptions.choices.filter(function(t){return(!t.oneTime||!l(_,{id:t.id}))&&(!t.condition||t.condition({state:y}))})),t.playerOptions.freeText&&t.playerOptions.freeText.condition&&(t.playerOptions.freeText.condition(y)||delete t.playerOptions.freeText))}var _,g,m,b,x,w;return o(this,function(o){switch(o.label){case 0:return _=v[v.length-1],g=s({random:d}),m=h.encounterDict[e],r(b=f(m[n[n.length-1]])),i.renderBeat({beat:b,onPlayerAction:t}),b.endOfEncounter?[4,c(u.sendEncounter,{encounterId:e,beatIds:n,state:y,actionLogs:v})]:[3,2];case 1:x=o.sent().error,w="End of encounter. Your feats were sent to the DM! Nice work.",x&&(w='Doh! This would normally be the end, but there was an error while sending encounter report to the DM. <a href="https://jimkang.com/moif">Try again?</a> Error message: <pre>'+x.message+"</pre>"),a.renderResolution({resolutionText:w}),o.label=2;case 2:return[2]}})})}},{"../dom/render-beat":5,"../dom/render-resolution":6,"../encounters":8,"../tasks/send-encounter":67,"errorback-promise":25,"lodash.clonedeep":37,"lodash.findwhere":41,probable:49}],13:[function(t,e,n){var r=t("probable"),o=t("d3-shape"),i=t("d3-array").range,a=o.area();function s(t){return t}a.curve(o.curveLinear),e.exports=function({direction:t,length:e,maxThickness:n,tearFreq:o=4}){0===t[1]?(a.x0(t[0]<0?n:0),a.y(s)):(a.y0(t[1]<0?n:0),a.x(s));const u=10+r.rollDie(4),c=2+r.roll(2);return 0===t[1]?a.x1(l):a.y1(l),a(i(0+o,e-o,o));function l(i){var a=0;if(0===i||i>=e-o)(t[0]<0||t[1]<0)&&(a=n);else{let e=Math.sin(i/u)*n/c;a=t[0]<0||t[1]<0?n/2+e:n/2-e,a+=Math.sin(i/4)*n/6,0===r.roll(2)?a+=r.rollDie(n/5):a-=r.rollDie(n/5)}return a}}},{"d3-array":19,"d3-shape":22,probable:49}],14:[function(t,e,n){var r=t("d3-selection"),o=t("./draw-tear");e.exports=function({parentEl:t,tearWidth:e=5,contentClassName:n,pathFill:i="brown"}){var a=r.select(t);return a.append("svg").classed(n+"-board",!0).attr("width",a.node().parentNode.clientWidth).attr("height","5000").append("foreignObject").attr("width","100%").attr("height","100%").attr("x",e).attr("y",e).append("xhtml:div").classed(n+"-container",!0).append("xhtml:div").classed(n,!0),function(){setTimeout(function(){!function(t){t.selectAll("foreignObject").attr("width",function(){return u(r.select(this))}).attr("height",function(){return s(r.select(this))}),t.attr("width",function(){return u(r.select(this))+2*e}).attr("height",function(){return s(r.select(this))+2*e});var n=t.selectAll(".tear-path").data([[0,-1],[0,1],[-1,0],[1,0]]);n.enter().append("path").classed("tear-path",!0).attr("fill",i).merge(n).attr("d",function(t){var n={direction:t,maxThickness:e},i="height";return 0===t[0]&&(i="width"),n.length=r.select(this.parentNode).attr(i),"width"===i&&(n.maxThickness+=1),o(n)}).attr("transform",function(t){var n=0,o=0;return t[0]>0&&(n=r.select(this.parentNode).attr("width")-e),t[1]>0&&(o=r.select(this.parentNode).attr("height")-e),`translate(${n}, ${o})`})}(a.selectAll("."+n+"-board"))},400)};function s(t){return t.select("."+n).node().clientHeight}function u(t){return t.select("."+n).node().clientWidth}}},{"./draw-tear":13,"d3-selection":21}],15:[function(t,e,n){var r=t("get-at-path");function o(t){return t}e.exports=function(t,e){var n="id";if(t){if("identity"===t)return o;n="string"==typeof t?t:"object"==typeof t&&"string"==typeof t.path?t.path.split("/"):""+t}return function(t,e){return function(n){if("object"==typeof n){var o=function(t,e){return"string"==typeof e?t[e]:Array.isArray(e)?r(t,e):void 0}(n,t);return void 0===o?e:o}return e}}(n,e)}},{"get-at-path":26}],16:[function(t,e,n){if("object"==typeof e&&"object"==typeof e.exports){var r={makeRequest:function(t,e){var n=t.json||"application/json"===t.mimeType,r=new XMLHttpRequest;if(r.open(t.method,t.url),t.mimeType&&r.setRequestHeader("content-type",t.mimeType),n&&r.setRequestHeader("accept","application/json"),"object"==typeof t.headers)for(var o in t.headers)r.setRequestHeader(o,t.headers[o]);t.binary&&(r.responseType="arraybuffer"),n&&"object"==typeof t.body&&(t.body=JSON.stringify(t.body));var i=null;r.onload=function(){clearTimeout(i),t.onData&&u();var o={statusCode:this.status,statusMessage:r.statusText,responseURL:r.responseURL,rawResponse:r.response,xhr:r};if(t.binary)e(null,o,r.response);else{var a=this.responseText;if(n)try{a=JSON.parse(a)}catch(t){o.jsonParseError=t}e(null,o,a)}};var a=0;function s(){r.abort(),clearTimeout(i),e()}function u(){r.responseText&&(t.onData(r.responseText.substr(a)),a=r.responseText.length)}return t.onData&&(r.onreadystatechange=function(){3===r.readyState&&u()}),r.onerror=function(){var t=new Error("There is a problem with the network.");t.name="XHR network error",e(t)},r.send(t.formData||t.body),t.timeLimit>0&&(i=setTimeout(s,t.timeLimit)),{url:t.url,cancelRequest:s}}};e.exports=r.makeRequest}},{}],17:[function(t,e,n){},{}],18:[function(t,e,n){e.exports=function(t){var e,n;return t&&(e=t.crownClass),function(t){n&&n.classList.remove(e),t&&(n=t).classList.add(e)}}},{}],19:[function(t,e,n){var r,o;r=this,o=function(t){"use strict";function e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function n(t){var n;return 1===t.length&&(n=t,t=function(t,r){return e(n(t),r)}),{left:function(e,n,r,o){for(null==r&&(r=0),null==o&&(o=e.length);r<o;){var i=r+o>>>1;t(e[i],n)<0?r=i+1:o=i}return r},right:function(e,n,r,o){for(null==r&&(r=0),null==o&&(o=e.length);r<o;){var i=r+o>>>1;t(e[i],n)>0?o=i:r=i+1}return r}}}var r=n(e),o=r.right,i=r.left;function a(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(o=+o)>=o&&++n}return n}function s(t){return 0|t.length}function u(t){return!(t>0)}function c(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function l(t,e){let n,r=0,o=0,i=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(i+=(n=e-o)*(e-(o+=n/++r)));else{let a=-1;for(let s of t)null!=(s=e(s,++a,t))&&(s=+s)>=s&&(i+=(n=s-o)*(s-(o+=n/++r)))}if(r>1)return i/(r-1)}function f(t,e){const n=l(t,e);return n?Math.sqrt(n):n}function h(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let o=-1;for(let i of t)null!=(i=e(i,++o,t))&&(void 0===n?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)))}return[n,r]}function p(t){return t}function d(t,e,n,r){return function t(o,i){if(i>=r.length)return n(o);const a=new Map,s=r[i++];let u=-1;for(const t of o){const e=s(t,++u,o),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[e,n]of a)a.set(e,t(n,i));return e(a)}(t,0)}var y=Array.prototype.slice;function v(t){return function(){return t}}function _(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var r=-1,o=0|Math.max(0,Math.ceil((e-t)/n)),i=new Array(o);++r<o;)i[r]=t+r*n;return i}var g=Math.sqrt(50),m=Math.sqrt(10),b=Math.sqrt(2);function x(t,e,n){var r=(e-t)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,o);return o>=0?(i>=g?10:i>=m?5:i>=b?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(i>=g?10:i>=m?5:i>=b?2:1)}function w(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/o;return i>=g?o*=10:i>=m?o*=5:i>=b&&(o*=2),e<t?-o:o}function k(t){return Math.ceil(Math.log(a(t))/Math.LN2)+1}function T(){var t=p,e=h,n=k;function r(r){Array.isArray(r)||(r=Array.from(r));var i,a,s=r.length,u=new Array(s);for(i=0;i<s;++i)u[i]=t(r[i],i,r);var c=e(u),l=c[0],f=c[1],h=n(u,l,f);Array.isArray(h)||(h=w(l,f,h),h=_(Math.ceil(l/h)*h,f,h));for(var p=h.length;h[0]<=l;)h.shift(),--p;for(;h[p-1]>f;)h.pop(),--p;var d,y=new Array(p+1);for(i=0;i<=p;++i)(d=y[i]=[]).x0=i>0?h[i-1]:l,d.x1=i<p?h[i]:f;for(i=0;i<s;++i)l<=(a=u[i])&&a<=f&&y[o(h,a,0,p)].push(r[i]);return y}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:v(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:v([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?v(y.call(t)):v(t),r):n},r}function j(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n<o||void 0===n&&o>=o)&&(n=o)}return n}function A(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n>o||void 0===n&&o>=o)&&(n=o)}return n}function O(t,n,r=0,o=t.length-1,i=e){for(;o>r;){if(o-r>600){const e=o-r+1,a=n-r+1,s=Math.log(e),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(e-u)/e)*(a-e/2<0?-1:1);O(t,n,Math.max(r,Math.floor(n-a*u/e+c)),Math.min(o,Math.floor(n+(e-a)*u/e+c)),i)}const e=t[n];let a=r,s=o;for(S(t,r,n),i(t[o],e)>0&&S(t,r,o);a<s;){for(S(t,a,s),++a,--s;i(t[a],e)<0;)++a;for(;i(t[s],e)>0;)--s}0===i(t[r],e)?S(t,r,s):S(t,++s,o),s<=n&&(r=s+1),n<=s&&(o=s-1)}return t}function S(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function M(t,e,n){if(r=(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n))).length){if((e=+e)<=0||r<2)return A(t);if(e>=1)return j(t);var r,o=(r-1)*e,i=Math.floor(o),a=j(O(t,i).subarray(0,i+1));return a+(A(t.subarray(i+1))-a)*(o-i)}}function E(t,e){let n,r=-1,o=-1;if(void 0===e)for(const e of t)++o,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,r=o);else for(let i of t)null!=(i=e(i,++o,t))&&(n<i||void 0===n&&i>=i)&&(n=i,r=o);return r}function I(t,e){let n,r=-1,o=-1;if(void 0===e)for(const e of t)++o,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,r=o);else for(let i of t)null!=(i=e(i,++o,t))&&(n>i||void 0===n&&i>=i)&&(n=i,r=o);return r}function N(t,n=e){if(1===n.length)return I(t,n);let r,o=-1,i=-1;for(const e of t)++i,(o<0?0===n(e,e):n(e,r)<0)&&(r=e,o=i);return o}function P(t){if(!(o=t.length))return[];for(var e=-1,n=A(t,C),r=new Array(n);++e<n;)for(var o,i=-1,a=r[e]=new Array(o);++i<o;)a[i]=t[i][e];return r}function C(t){return t.length}t.ascending=e,t.bin=T,t.bisect=o,t.bisectLeft=i,t.bisectRight=o,t.bisector=n,t.count=a,t.cross=function(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(c)).map(s),r=t.length-1,o=new Array(r+1).fill(0),i=[];if(r<0||n.some(u))return i;for(;;){i.push(o.map((e,n)=>t[n][e]));let a=r;for(;++o[a]===n[a];){if(0===a)return e?i.map(e):i;o[a--]=0}}},t.cumsum=function(t,e){var n=0,r=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:o=>n+=+e(o,r++,t)||0)},t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.deviation=f,t.extent=h,t.greatest=function(t,n=e){let r,o=!1;if(1===n.length){let i;for(const a of t){const t=n(a);(o?e(t,i)>0:0===e(t,t))&&(r=a,i=t,o=!0)}}else for(const e of t)(o?n(e,r)>0:0===n(e,e))&&(r=e,o=!0);return r},t.greatestIndex=function(t,n=e){if(1===n.length)return E(t,n);let r,o=-1,i=-1;for(const e of t)++i,(o<0?0===n(e,e):n(e,r)>0)&&(r=e,o=i);return o},t.group=function(t,...e){return d(t,p,p,e)},t.groups=function(t,...e){return d(t,Array.from,p,e)},t.histogram=T,t.least=function(t,n=e){let r,o=!1;if(1===n.length){let i;for(const a of t){const t=n(a);(o?e(t,i)<0:0===e(t,t))&&(r=a,i=t,o=!0)}}else for(const e of t)(o?n(e,r)<0:0===n(e,e))&&(r=e,o=!0);return r},t.leastIndex=N,t.max=j,t.maxIndex=E,t.mean=function(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let o=-1;for(let i of t)null!=(i=e(i,++o,t))&&(i=+i)>=i&&(++n,r+=i)}if(n)return r/n},t.median=function(t,e){return M(t,.5,e)},t.merge=function(t){return Array.from(function*(t){for(const e of t)yield*e}(t))},t.min=A,t.minIndex=I,t.pairs=function(t,e=function(t,e){return[t,e]}){const n=[];let r,o=!1;for(const i of t)o&&n.push(e(r,i)),r=i,o=!0;return n},t.permute=function(t,e){return Array.from(e,e=>t[e])},t.quantile=M,t.quantileSorted=function(t,e,n=function(t){return null===t?NaN:+t}){if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,o=(r-1)*e,i=Math.floor(o),a=+n(t[i],i,t);return a+(+n(t[i+1],i+1,t)-a)*(o-i)}},t.quickselect=O,t.range=_,t.rollup=function(t,e,...n){return d(t,p,e,n)},t.rollups=function(t,e,...n){return d(t,Array.from,e,n)},t.scan=function(t,e){const n=N(t,e);return n<0?void 0:n},t.shuffle=function(t,e=0,n=t.length){for(var r,o,i=n-(e=+e);i;)o=Math.random()*i--|0,r=t[i+e],t[i+e]=t[o+e],t[o+e]=r;return t},t.sum=function(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let o of t)(o=+e(o,++r,t))&&(n+=o)}return n},t.thresholdFreedmanDiaconis=function(t,e,n){return Math.ceil((n-e)/(2*(M(t,.75)-M(t,.25))*Math.pow(a(t),-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*f(t)*Math.pow(a(t),-1/3)))},t.thresholdSturges=k,t.tickIncrement=x,t.tickStep=w,t.ticks=function(t,e,n){var r,o,i,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),0===(a=x(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),i=new Array(o=Math.ceil(e-t+1));++s<o;)i[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),i=new Array(o=Math.ceil(t-e+1));++s<o;)i[s]=(t-s)/a;return r&&i.reverse(),i},t.transpose=P,t.variance=l,t.zip=function(){return P(arguments)},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?o(n):"function"==typeof define&&define.amd?define(["exports"],o):o((r=r||self).d3=r.d3||{})},{}],20:[function(t,e,n){var r,o;r=this,o=function(t){"use strict";var e=Math.PI,n=2*e,r=n-1e-6;function o(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function i(){return new o}o.prototype=i.prototype={constructor:o,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,o,i){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+o)+","+(this._y1=+i)},arcTo:function(t,n,r,o,i){t=+t,n=+n,r=+r,o=+o,i=+i;var a=this._x1,s=this._y1,u=r-t,c=o-n,l=a-t,f=s-n,h=l*l+f*f;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(h>1e-6)if(Math.abs(f*u-c*l)>1e-6&&i){var p=r-a,d=o-s,y=u*u+c*c,v=p*p+d*d,_=Math.sqrt(y),g=Math.sqrt(h),m=i*Math.tan((e-Math.acos((y+h-v)/(2*_*g)))/2),b=m/g,x=m/_;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*l)+","+(n+b*f)),this._+="A"+i+","+i+",0,0,"+ +(f*p>l*d)+","+(this._x1=t+x*u)+","+(this._y1=n+x*c)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,o,i,a,s,u){t=+t,o=+o,u=!!u;var c=(i=+i)*Math.cos(a),l=i*Math.sin(a),f=t+c,h=o+l,p=1^u,d=u?a-s:s-a;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+f+","+h:(Math.abs(this._x1-f)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+f+","+h),i&&(d<0&&(d=d%n+n),d>r?this._+="A"+i+","+i+",0,1,"+p+","+(t-c)+","+(o-l)+"A"+i+","+i+",0,1,"+p+","+(this._x1=f)+","+(this._y1=h):d>1e-6&&(this._+="A"+i+","+i+",0,"+ +(d>=e)+","+p+","+(this._x1=t+i*Math.cos(s))+","+(this._y1=o+i*Math.sin(s))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},t.path=i,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?o(n):"function"==typeof define&&define.amd?define(["exports"],o):o((r=r||self).d3=r.d3||{})},{}],21:[function(t,e,n){var r,o;r=this,o=function(t){"use strict";var e="http://www.w3.org/1999/xhtml",n={svg:"http://www.w3.org/2000/svg",xhtml:e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function r(t){var e=t+="",r=e.indexOf(":");return r>=0&&"xmlns"!==(e=t.slice(0,r))&&(t=t.slice(r+1)),n.hasOwnProperty(e)?{space:n[e],local:t}:t}function o(t){var n=r(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===e&&n.documentElement.namespaceURI===e?n.createElement(t):n.createElementNS(r,t)}})(n)}function i(){}function a(t){return null==t?i:function(){return this.querySelector(t)}}function s(){return[]}function u(t){return null==t?s:function(){return this.querySelectorAll(t)}}function c(t){return function(){return this.matches(t)}}function l(t){return new Array(t.length)}function f(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}f.prototype={constructor:f,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var h="$";function p(t,e,n,r,o,i){for(var a,s=0,u=e.length,c=i.length;s<c;++s)(a=e[s])?(a.__data__=i[s],r[s]=a):n[s]=new f(t,i[s]);for(;s<u;++s)(a=e[s])&&(o[s]=a)}function d(t,e,n,r,o,i,a){var s,u,c,l={},p=e.length,d=i.length,y=new Array(p);for(s=0;s<p;++s)(u=e[s])&&(y[s]=c=h+a.call(u,u.__data__,s,e),c in l?o[s]=u:l[c]=u);for(s=0;s<d;++s)(u=l[c=h+a.call(t,i[s],s,i)])?(r[s]=u,u.__data__=i[s],l[c]=null):n[s]=new f(t,i[s]);for(s=0;s<p;++s)(u=e[s])&&l[y[s]]===u&&(o[s]=u)}function y(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function v(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _(t,e){return t.style.getPropertyValue(e)||v(t).getComputedStyle(t,null).getPropertyValue(e)}function g(t){return t.trim().split(/^|\s+/)}function m(t){return t.classList||new b(t)}function b(t){this._node=t,this._names=g(t.getAttribute("class")||"")}function x(t,e){for(var n=m(t),r=-1,o=e.length;++r<o;)n.add(e[r])}function w(t,e){for(var n=m(t),r=-1,o=e.length;++r<o;)n.remove(e[r])}function k(){this.textContent=""}function T(){this.innerHTML=""}function j(){this.nextSibling&&this.parentNode.appendChild(this)}function A(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function O(){return null}function S(){var t=this.parentNode;t&&t.removeChild(this)}function M(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function E(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}b.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var I={};(t.event=null,"undefined"!=typeof document)&&("onmouseenter"in document.documentElement||(I={mouseenter:"mouseover",mouseleave:"mouseout"}));function N(t,e,n){return t=P(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function P(e,n,r){return function(o){var i=t.event;t.event=o;try{e.call(this,this.__data__,n,r)}finally{t.event=i}}}function C(t){return function(){var e=this.__on;if(e){for(var n,r=0,o=-1,i=e.length;r<i;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?e.length=o:delete this.__on}}}function R(t,e,n){var r=I.hasOwnProperty(t.type)?N:P;return function(o,i,a){var s,u=this.__on,c=r(e,i,a);if(u)for(var l=0,f=u.length;l<f;++l)if((s=u[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function D(t,e,n){var r=v(t),o=r.CustomEvent;"function"==typeof o?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}var q=[null];function F(t,e){this._groups=t,this._parents=e}function L(){return new F([[document.documentElement]],q)}function W(t){return"string"==typeof t?new F([[document.querySelector(t)]],[document.documentElement]):new F([[t]],q)}F.prototype=L.prototype={constructor:F,select:function(t){"function"!=typeof t&&(t=a(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,s,u=e[o],c=u.length,l=r[o]=new Array(c),f=0;f<c;++f)(i=u[f])&&(s=t.call(i,i.__data__,f,u))&&("__data__"in i&&(s.__data__=i.__data__),l[f]=s);return new F(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,r=[],o=[],i=0;i<n;++i)for(var a,s=e[i],c=s.length,l=0;l<c;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),o.push(a));return new F(r,o)},filter:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,a=e[o],s=a.length,u=r[o]=[],l=0;l<s;++l)(i=a[l])&&t.call(i,i.__data__,l,a)&&u.push(i);return new F(r,this._parents)},data:function(t,e){if(!t)return v=new Array(this.size()),l=-1,this.each(function(t){v[++l]=t}),v;var n,r=e?d:p,o=this._parents,i=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=i.length,s=new Array(a),u=new Array(a),c=new Array(a),l=0;l<a;++l){var f=o[l],h=i[l],y=h.length,v=t.call(f,f&&f.__data__,l,o),_=v.length,g=u[l]=new Array(_),m=s[l]=new Array(_);r(f,h,g,m,c[l]=new Array(y),v,e);for(var b,x,w=0,k=0;w<_;++w)if(b=g[w]){for(w>=k&&(k=w+1);!(x=m[k])&&++k<_;);b._next=x||null}}return(s=new F(s,o))._enter=u,s._exit=c,s},enter:function(){return new F(this._enter||this._groups.map(l),this._parents)},exit:function(){return new F(this._exit||this._groups.map(l),this._parents)},join:function(t,e,n){var r=this.enter(),o=this,i=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(o=e(o)),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var u,c=e[s],l=n[s],f=c.length,h=a[s]=new Array(f),p=0;p<f;++p)(u=c[p]||l[p])&&(h[p]=u);for(;s<r;++s)a[s]=e[s];return new F(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,o=t[e],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=y);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,s=n[i],u=s.length,c=o[i]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(e)}return new F(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o,i=e[n],a=0,s=i.length;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this},attr:function(t,e){var n=r(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):_(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=g(t+"");if(arguments.length<2){for(var r=m(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?x:w)(this,t)}}:e?function(t){return function(){x(this,t)}}:function(t){return function(){w(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?k:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?T:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(j)},lower:function(){return this.each(A)},append:function(t){var e="function"==typeof t?t:o(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:o(t),r=null==e?O:"function"==typeof e?e:a(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(S)},clone:function(t){return this.select(t?E:M)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,o,i=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=i.length;if(!(arguments.length<2)){for(s=e?R:C,null==n&&(n=!1),r=0;r<a;++r)this.each(s(i[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<a;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return D(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return D(this,t,e)}})(t,e))}};var B=0;function H(){return new $}function $(){this._="@"+(++B).toString(36)}function z(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function G(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}$.prototype=H.prototype={constructor:$,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},t.clientPoint=G,t.create=function(t){return W(o(t).call(document.documentElement))},t.creator=o,t.customEvent=function(e,n,r,o){var i=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,o)}finally{t.event=i}},t.local=H,t.matcher=c,t.mouse=function(t){var e=z();return e.changedTouches&&(e=e.changedTouches[0]),G(t,e)},t.namespace=r,t.namespaces=n,t.select=W,t.selectAll=function(t){return"string"==typeof t?new F([document.querySelectorAll(t)],[document.documentElement]):new F([null==t?[]:t],q)},t.selection=L,t.selector=a,t.selectorAll=u,t.style=_,t.touch=function(t,e,n){arguments.length<3&&(n=e,e=z().changedTouches);for(var r,o=0,i=e?e.length:0;o<i;++o)if((r=e[o]).identifier===n)return G(t,r);return null},t.touches=function(t,e){null==e&&(e=z().touches);for(var n=0,r=e?e.length:0,o=new Array(r);n<r;++n)o[n]=G(t,e[n]);return o},t.window=v,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?o(n):"function"==typeof define&&define.amd?define(["exports"],o):o((r=r||self).d3=r.d3||{})},{}],22:[function(t,e,n){var r,o;r=this,o=function(t,e){"use strict";function n(t){return function(){return t}}var r=Math.abs,o=Math.atan2,i=Math.cos,a=Math.max,s=Math.min,u=Math.sin,c=Math.sqrt,l=1e-12,f=Math.PI,h=f/2,p=2*f;function d(t){return t>=1?h:t<=-1?-h:Math.asin(t)}function y(t){return t.innerRadius}function v(t){return t.outerRadius}function _(t){return t.startAngle}function g(t){return t.endAngle}function m(t){return t&&t.padAngle}function b(t,e,n,r,o,i,s){var u=t-n,l=e-r,f=(s?i:-i)/c(u*u+l*l),h=f*l,p=-f*u,d=t+h,y=e+p,v=n+h,_=r+p,g=(d+v)/2,m=(y+_)/2,b=v-d,x=_-y,w=b*b+x*x,k=o-i,T=d*_-v*y,j=(x<0?-1:1)*c(a(0,k*k*w-T*T)),A=(T*x-b*j)/w,O=(-T*b-x*j)/w,S=(T*x+b*j)/w,M=(-T*b+x*j)/w,E=A-g,I=O-m,N=S-g,P=M-m;return E*E+I*I>N*N+P*P&&(A=S,O=M),{cx:A,cy:O,x01:-h,y01:-p,x11:A*(o/k-1),y11:O*(o/k-1)}}function x(t){this._context=t}function w(t){return new x(t)}function k(t){return t[0]}function T(t){return t[1]}function j(){var t=k,r=T,o=n(!0),i=null,a=w,s=null;function u(n){var u,c,l,f=n.length,h=!1;for(null==i&&(s=a(l=e.path())),u=0;u<=f;++u)!(u<f&&o(c=n[u],u,n))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(c,u,n),+r(c,u,n));if(l)return s=null,l+""||null}return u.x=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),u):t},u.y=function(t){return arguments.length?(r="function"==typeof t?t:n(+t),u):r},u.defined=function(t){return arguments.length?(o="function"==typeof t?t:n(!!t),u):o},u.curve=function(t){return arguments.length?(a=t,null!=i&&(s=a(i)),u):a},u.context=function(t){return arguments.length?(null==t?i=s=null:s=a(i=t),u):i},u}function A(){var t=k,r=null,o=n(0),i=T,a=n(!0),s=null,u=w,c=null;function l(n){var l,f,h,p,d,y=n.length,v=!1,_=new Array(y),g=new Array(y);for(null==s&&(c=u(d=e.path())),l=0;l<=y;++l){if(!(l<y&&a(p=n[l],l,n))===v)if(v=!v)f=l,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),h=l-1;h>=f;--h)c.point(_[h],g[h]);c.lineEnd(),c.areaEnd()}v&&(_[l]=+t(p,l,n),g[l]=+o(p,l,n),c.point(r?+r(p,l,n):_[l],i?+i(p,l,n):g[l]))}if(d)return c=null,d+""||null}function f(){return j().defined(a).curve(u).context(s)}return l.x=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),r=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),l):t},l.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:n(+t),l):r},l.y=function(t){return arguments.length?(o="function"==typeof t?t:n(+t),i=null,l):o},l.y0=function(t){return arguments.length?(o="function"==typeof t?t:n(+t),l):o},l.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:n(+t),l):i},l.lineX0=l.lineY0=function(){return f().x(t).y(o)},l.lineY1=function(){return f().x(t).y(i)},l.lineX1=function(){return f().x(r).y(o)},l.defined=function(t){return arguments.length?(a="function"==typeof t?t:n(!!t),l):a},l.curve=function(t){return arguments.length?(u=t,null!=s&&(c=u(s)),l):u},l.context=function(t){return arguments.length?(null==t?s=c=null:c=u(s=t),l):s},l}function O(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function S(t){return t}x.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var M=I(w);function E(t){this._curve=t}function I(t){function e(e){return new E(t(e))}return e._curve=t,e}function N(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(I(t)):e()._curve},t}function P(){return N(j().curve(M))}function C(){var t=A().curve(M),e=t.curve,n=t.lineX0,r=t.lineX1,o=t.lineY0,i=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return N(n())},delete t.lineX0,t.lineEndAngle=function(){return N(r())},delete t.lineX1,t.lineInnerRadius=function(){return N(o())},delete t.lineY0,t.lineOuterRadius=function(){return N(i())},delete t.lineY1,t.curve=function(t){return arguments.length?e(I(t)):e()._curve},t}function R(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}E.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var D=Array.prototype.slice;function q(t){return t.source}function F(t){return t.target}function L(t){var r=q,o=F,i=k,a=T,s=null;function u(){var n,u=D.call(arguments),c=r.apply(this,u),l=o.apply(this,u);if(s||(s=n=e.path()),t(s,+i.apply(this,(u[0]=c,u)),+a.apply(this,u),+i.apply(this,(u[0]=l,u)),+a.apply(this,u)),n)return s=null,n+""||null}return u.source=function(t){return arguments.length?(r=t,u):r},u.target=function(t){return arguments.length?(o=t,u):o},u.x=function(t){return arguments.length?(i="function"==typeof t?t:n(+t),u):i},u.y=function(t){return arguments.length?(a="function"==typeof t?t:n(+t),u):a},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u}function W(t,e,n,r,o){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,o,r,o)}function B(t,e,n,r,o){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+o)/2,r,n,r,o)}function H(t,e,n,r,o){var i=R(e,n),a=R(e,n=(n+o)/2),s=R(r,n),u=R(r,o);t.moveTo(i[0],i[1]),t.bezierCurveTo(a[0],a[1],s[0],s[1],u[0],u[1])}var $={draw:function(t,e){var n=Math.sqrt(e/f);t.moveTo(n,0),t.arc(0,0,n,0,p)}},z={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},G=Math.sqrt(1/3),U=2*G,Y={draw:function(t,e){var n=Math.sqrt(e/U),r=n*G;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},K=Math.sin(f/10)/Math.sin(7*f/10),V=Math.sin(p/10)*K,X=-Math.cos(p/10)*K,Q={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=V*n,o=X*n;t.moveTo(0,-n),t.lineTo(r,o);for(var i=1;i<5;++i){var a=p*i/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*o,u*r+s*o)}t.closePath()}},J={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},Z=Math.sqrt(3),tt={draw:function(t,e){var n=-Math.sqrt(e/(3*Z));t.moveTo(0,2*n),t.lineTo(-Z*n,-n),t.lineTo(Z*n,-n),t.closePath()}},et=-.5,nt=Math.sqrt(3)/2,rt=1/Math.sqrt(12),ot=3*(rt/2+1),it={draw:function(t,e){var n=Math.sqrt(e/ot),r=n/2,o=n*rt,i=r,a=n*rt+n,s=-i,u=a;t.moveTo(r,o),t.lineTo(i,a),t.lineTo(s,u),t.lineTo(et*r-nt*o,nt*r+et*o),t.lineTo(et*i-nt*a,nt*i+et*a),t.lineTo(et*s-nt*u,nt*s+et*u),t.lineTo(et*r+nt*o,et*o-nt*r),t.lineTo(et*i+nt*a,et*a-nt*i),t.lineTo(et*s+nt*u,et*u-nt*s),t.closePath()}},at=[$,z,Y,J,Q,tt,it];function st(){}function ut(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ct(t){this._context=t}function lt(t){this._context=t}function ft(t){this._context=t}function ht(t,e){this._basis=new ct(t),this._beta=e}ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ut(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ut(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},lt.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ut(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ut(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ht.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,o=t[0],i=e[0],a=t[n]-o,s=e[n]-i,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(o+r*a),this._beta*e[u]+(1-this._beta)*(i+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var pt=function t(e){function n(t){return 1===e?new ct(t):new ht(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function dt(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function yt(t,e){this._context=t,this._k=(1-e)/6}yt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:dt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:dt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var vt=function t(e){function n(t){return new yt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function _t(t,e){this._context=t,this._k=(1-e)/6}_t.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:dt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var gt=function t(e){function n(t){return new _t(t,e)}return n.tension=function(e){return t(+e)},n}(0);function mt(t,e){this._context=t,this._k=(1-e)/6}mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:dt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var bt=function t(e){function n(t){return new mt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function xt(t,e,n){var r=t._x1,o=t._y1,i=t._x2,a=t._y2;if(t._l01_a>l){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,o=(o*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>l){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);i=(i*c+t._x1*t._l23_2a-e*t._l12_2a)/f,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(r,o,i,a,t._x2,t._y2)}function wt(t,e){this._context=t,this._alpha=e}wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:xt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var kt=function t(e){function n(t){return e?new wt(t,e):new yt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Tt(t,e){this._context=t,this._alpha=e}Tt.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:xt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var jt=function t(e){function n(t){return e?new Tt(t,e):new _t(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function At(t,e){this._context=t,this._alpha=e}At.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:xt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ot=function t(e){function n(t){return e?new At(t,e):new mt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function St(t){this._context=t}function Mt(t){return t<0?-1:1}function Et(t,e,n){var r=t._x1-t._x0,o=e-t._x1,i=(t._y1-t._y0)/(r||o<0&&-0),a=(n-t._y1)/(o||r<0&&-0),s=(i*o+a*r)/(r+o);return(Mt(i)+Mt(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(s))||0}function It(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Nt(t,e,n){var r=t._x0,o=t._y0,i=t._x1,a=t._y1,s=(i-r)/3;t._context.bezierCurveTo(r+s,o+s*e,i-s,a-s*n,i,a)}function Pt(t){this._context=t}function Ct(t){this._context=new Rt(t)}function Rt(t){this._context=t}function Dt(t){this._context=t}function qt(t){var e,n,r=t.length-1,o=new Array(r),i=new Array(r),a=new Array(r);for(o[0]=0,i[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)o[e]=1,i[e]=4,a[e]=4*t[e]+2*t[e+1];for(o[r-1]=2,i[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=o[e]/i[e-1],i[e]-=n,a[e]-=n*a[e-1];for(o[r-1]=a[r-1]/i[r-1],e=r-2;e>=0;--e)o[e]=(a[e]-o[e+1])/i[e];for(i[r-1]=(t[r]+o[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-o[e+1];return[o,i]}function Ft(t,e){this._context=t,this._t=e}function Lt(t,e){if((o=t.length)>1)for(var n,r,o,i=1,a=t[e[0]],s=a.length;i<o;++i)for(r=a,a=t[e[i]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function Wt(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Bt(t,e){return t[e]}function Ht(t){var e=t.map($t);return Wt(t).sort(function(t,n){return e[t]-e[n]})}function $t(t){for(var e,n=-1,r=0,o=t.length,i=-1/0;++n<o;)(e=+t[n][1])>i&&(i=e,r=n);return r}function zt(t){var e=t.map(Gt);return Wt(t).sort(function(t,n){return e[t]-e[n]})}function Gt(t){for(var e,n=0,r=-1,o=t.length;++r<o;)(e=+t[r][1])&&(n+=e);return n}St.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Nt(this,this._t0,It(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Nt(this,It(this,n=Et(this,t,e)),n);break;default:Nt(this,this._t0,n=Et(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Ct.prototype=Object.create(Pt.prototype)).point=function(t,e){Pt.prototype.point.call(this,e,t)},Rt.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,o,i){this._context.bezierCurveTo(e,t,r,n,i,o)}},Dt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=qt(t),o=qt(e),i=0,a=1;a<n;++i,++a)this._context.bezierCurveTo(r[0][i],o[0][i],r[1][i],o[1][i],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},t.arc=function(){var t=y,a=v,x=n(0),w=null,k=_,T=g,j=m,A=null;function O(){var n,y,v,_=+t.apply(this,arguments),g=+a.apply(this,arguments),m=k.apply(this,arguments)-h,O=T.apply(this,arguments)-h,S=r(O-m),M=O>m;if(A||(A=n=e.path()),g<_&&(y=g,g=_,_=y),g>l)if(S>p-l)A.moveTo(g*i(m),g*u(m)),A.arc(0,0,g,m,O,!M),_>l&&(A.moveTo(_*i(O),_*u(O)),A.arc(0,0,_,O,m,M));else{var E,I,N=m,P=O,C=m,R=O,D=S,q=S,F=j.apply(this,arguments)/2,L=F>l&&(w?+w.apply(this,arguments):c(_*_+g*g)),W=s(r(g-_)/2,+x.apply(this,arguments)),B=W,H=W;if(L>l){var $=d(L/_*u(F)),z=d(L/g*u(F));(D-=2*$)>l?(C+=$*=M?1:-1,R-=$):(D=0,C=R=(m+O)/2),(q-=2*z)>l?(N+=z*=M?1:-1,P-=z):(q=0,N=P=(m+O)/2)}var G=g*i(N),U=g*u(N),Y=_*i(R),K=_*u(R);if(W>l){var V,X=g*i(P),Q=g*u(P),J=_*i(C),Z=_*u(C);if(S<f&&(V=function(t,e,n,r,o,i,a,s){var u=n-t,c=r-e,f=a-o,h=s-i,p=h*u-f*c;if(!(p*p<l))return[t+(p=(f*(e-i)-h*(t-o))/p)*u,e+p*c]}(G,U,J,Z,X,Q,Y,K))){var tt=G-V[0],et=U-V[1],nt=X-V[0],rt=Q-V[1],ot=1/u(((v=(tt*nt+et*rt)/(c(tt*tt+et*et)*c(nt*nt+rt*rt)))>1?0:v<-1?f:Math.acos(v))/2),it=c(V[0]*V[0]+V[1]*V[1]);B=s(W,(_-it)/(ot-1)),H=s(W,(g-it)/(ot+1))}}q>l?H>l?(E=b(J,Z,G,U,g,H,M),I=b(X,Q,Y,K,g,H,M),A.moveTo(E.cx+E.x01,E.cy+E.y01),H<W?A.arc(E.cx,E.cy,H,o(E.y01,E.x01),o(I.y01,I.x01),!M):(A.arc(E.cx,E.cy,H,o(E.y01,E.x01),o(E.y11,E.x11),!M),A.arc(0,0,g,o(E.cy+E.y11,E.cx+E.x11),o(I.cy+I.y11,I.cx+I.x11),!M),A.arc(I.cx,I.cy,H,o(I.y11,I.x11),o(I.y01,I.x01),!M))):(A.moveTo(G,U),A.arc(0,0,g,N,P,!M)):A.moveTo(G,U),_>l&&D>l?B>l?(E=b(Y,K,X,Q,_,-B,M),I=b(G,U,J,Z,_,-B,M),A.lineTo(E.cx+E.x01,E.cy+E.y01),B<W?A.arc(E.cx,E.cy,B,o(E.y01,E.x01),o(I.y01,I.x01),!M):(A.arc(E.cx,E.cy,B,o(E.y01,E.x01),o(E.y11,E.x11),!M),A.arc(0,0,_,o(E.cy+E.y11,E.cx+E.x11),o(I.cy+I.y11,I.cx+I.x11),M),A.arc(I.cx,I.cy,B,o(I.y11,I.x11),o(I.y01,I.x01),!M))):A.arc(0,0,_,R,C,M):A.lineTo(Y,K)}else A.moveTo(0,0);if(A.closePath(),n)return A=null,n+""||null}return O.centroid=function(){var e=(+t.apply(this,arguments)+ +a.apply(this,arguments))/2,n=(+k.apply(this,arguments)+ +T.apply(this,arguments))/2-f/2;return[i(n)*e,u(n)*e]},O.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),O):t},O.outerRadius=function(t){return arguments.length?(a="function"==typeof t?t:n(+t),O):a},O.cornerRadius=function(t){return arguments.length?(x="function"==typeof t?t:n(+t),O):x},O.padRadius=function(t){return arguments.length?(w=null==t?null:"function"==typeof t?t:n(+t),O):w},O.startAngle=function(t){return arguments.length?(k="function"==typeof t?t:n(+t),O):k},O.endAngle=function(t){return arguments.length?(T="function"==typeof t?t:n(+t),O):T},O.padAngle=function(t){return arguments.length?(j="function"==typeof t?t:n(+t),O):j},O.context=function(t){return arguments.length?(A=null==t?null:t,O):A},O},t.area=A,t.areaRadial=C,t.curveBasis=function(t){return new ct(t)},t.curveBasisClosed=function(t){return new lt(t)},t.curveBasisOpen=function(t){return new ft(t)},t.curveBundle=pt,t.curveCardinal=vt,t.curveCardinalClosed=gt,t.curveCardinalOpen=bt,t.curveCatmullRom=kt,t.curveCatmullRomClosed=jt,t.curveCatmullRomOpen=Ot,t.curveLinear=w,t.curveLinearClosed=function(t){return new St(t)},t.curveMonotoneX=function(t){return new Pt(t)},t.curveMonotoneY=function(t){return new Ct(t)},t.curveNatural=function(t){return new Dt(t)},t.curveStep=function(t){return new Ft(t,.5)},t.curveStepAfter=function(t){return new Ft(t,1)},t.curveStepBefore=function(t){return new Ft(t,0)},t.line=j,t.lineRadial=P,t.linkHorizontal=function(){return L(W)},t.linkRadial=function(){var t=L(H);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.linkVertical=function(){return L(B)},t.pie=function(){var t=S,e=O,r=null,o=n(0),i=n(p),a=n(0);function s(n){var s,u,c,l,f,h=n.length,d=0,y=new Array(h),v=new Array(h),_=+o.apply(this,arguments),g=Math.min(p,Math.max(-p,i.apply(this,arguments)-_)),m=Math.min(Math.abs(g)/h,a.apply(this,arguments)),b=m*(g<0?-1:1);for(s=0;s<h;++s)(f=v[y[s]=s]=+t(n[s],s,n))>0&&(d+=f);for(null!=e?y.sort(function(t,n){return e(v[t],v[n])}):null!=r&&y.sort(function(t,e){return r(n[t],n[e])}),s=0,c=d?(g-h*b)/d:0;s<h;++s,_=l)u=y[s],l=_+((f=v[u])>0?f*c:0)+b,v[u]={data:n[u],index:s,value:f,startAngle:_,endAngle:l,padAngle:m};return v}return s.value=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),s):t},s.sortValues=function(t){return arguments.length?(e=t,r=null,s):e},s.sort=function(t){return arguments.length?(r=t,e=null,s):r},s.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:n(+t),s):o},s.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:n(+t),s):i},s.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:n(+t),s):a},s},t.pointRadial=R,t.radialArea=C,t.radialLine=P,t.stack=function(){var t=n([]),e=Wt,r=Lt,o=Bt;function i(n){var i,a,s=t.apply(this,arguments),u=n.length,c=s.length,l=new Array(c);for(i=0;i<c;++i){for(var f,h=s[i],p=l[i]=new Array(u),d=0;d<u;++d)p[d]=f=[0,+o(n[d],h,d,n)],f.data=n[d];p.key=h}for(i=0,a=e(l);i<c;++i)l[a[i]].index=i;return r(l,a),l}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:n(D.call(e)),i):t},i.value=function(t){return arguments.length?(o="function"==typeof t?t:n(+t),i):o},i.order=function(t){return arguments.length?(e=null==t?Wt:"function"==typeof t?t:n(D.call(t)),i):e},i.offset=function(t){return arguments.length?(r=null==t?Lt:t,i):r},i},t.stackOffsetDiverging=function(t,e){if((s=t.length)>0)for(var n,r,o,i,a,s,u=0,c=t[e[0]].length;u<c;++u)for(i=a=0,n=0;n<s;++n)(o=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=i,r[1]=i+=o):o<0?(r[1]=a,r[0]=a+=o):(r[0]=0,r[1]=o)},t.stackOffsetExpand=function(t,e){if((r=t.length)>0){for(var n,r,o,i=0,a=t[0].length;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Lt(t,e)}},t.stackOffsetNone=Lt,t.stackOffsetSilhouette=function(t,e){if((n=t.length)>0){for(var n,r=0,o=t[e[0]],i=o.length;r<i;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;o[r][1]+=o[r][0]=-s/2}Lt(t,e)}},t.stackOffsetWiggle=function(t,e){if((o=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,o,i=0,a=1;a<r;++a){for(var s=0,u=0,c=0;s<o;++s){for(var l=t[e[s]],f=l[a][1]||0,h=(f-(l[a-1][1]||0))/2,p=0;p<s;++p){var d=t[e[p]];h+=(d[a][1]||0)-(d[a-1][1]||0)}u+=f,c+=h*f}n[a-1][1]+=n[a-1][0]=i,u&&(i-=c/u)}n[a-1][1]+=n[a-1][0]=i,Lt(t,e)}},t.stackOrderAppearance=Ht,t.stackOrderAscending=zt,t.stackOrderDescending=function(t){return zt(t).reverse()},t.stackOrderInsideOut=function(t){var e,n,r=t.length,o=t.map(Gt),i=Ht(t),a=0,s=0,u=[],c=[];for(e=0;e<r;++e)n=i[e],a<s?(a+=o[n],u.push(n)):(s+=o[n],c.push(n));return c.reverse().concat(u)},t.stackOrderNone=Wt,t.stackOrderReverse=function(t){return Wt(t).reverse()},t.symbol=function(){var t=n($),r=n(64),o=null;function i(){var n;if(o||(o=n=e.path()),t.apply(this,arguments).draw(o,+r.apply(this,arguments)),n)return o=null,n+""||null}return i.type=function(e){return arguments.length?(t="function"==typeof e?e:n(e),i):t},i.size=function(t){return arguments.length?(r="function"==typeof t?t:n(+t),i):r},i.context=function(t){return arguments.length?(o=null==t?null:t,i):o},i},t.symbolCircle=$,t.symbolCross=z,t.symbolDiamond=Y,t.symbolSquare=J,t.symbolStar=Q,t.symbolTriangle=tt,t.symbolWye=it,t.symbols=at,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?o(n,t("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-path"],o):o((r=r||self).d3=r.d3||{},r.d3)},{"d3-path":20}],23:[function(t,e,n){var r=t("probable"),o=t("lodash.isobject");function i(t,e){return t+e}function a(t){var e={};if("string"!=typeof t)throw new Error("Parameter `command` must be a string, not undefined");if(-1!==t.search(/d\d/i)){var n=t.match(/(\d+)d/i);e.times=n&&n[1]&&parseInt(n[1])||1;var r=t.match(/d(\d+)/i);e.faces=r&&r[1]&&parseInt(r[1])||0;var o=t.match(/\(k(\d+)\)/i);e.keep=o&&o[1]&&parseInt(o[1])||null;var i=/-L/.test(t);e.lowest=i;var a=/-H/.test(t);e.highest=a;var s=t.match(/(?!d\d+)x([\d.]+)/);e.multiplier=s&&s[1]&&parseFloat(s[1])||1;var u=t.match(/(\+[\d.]+\)?|-[\d.]+)\)?/);e.modifier=u&&u[1]&&parseFloat(u[1])||0;var c=t.match(/^(\d+)x\(|\)x(\d+)$/);return e.repeat=c&&c[1]&&parseInt(c[1])||c&&c[2]&&parseInt(c[2])||1,e}}e.exports=function(t){var e,n,s=r;function u(t){var r={rolls:[],total:NaN,source:t},o=function(t){var r;return!function(t){return void 0!==e&&t.times>e}(t)?function(t){return void 0!==n&&t.faces>n}(t)&&((r=new Error("I don't have a die with that many faces.")).name="Not enough faces"):(r=new Error("I can't roll that many times.")).name="Too many rolls",r}(t);if(o)r.error=o;else{for(var a=0;a<t.times;++a)r.rolls.push(s.rollDie(t.faces));r.total=r.rolls.reduce(i,0),r.total*=t.multiplier,r.total+=t.modifier}return r}return t&&(t.probable&&(s=t.probable),t.numberOfRollsLimit&&(e=t.numberOfRollsLimit),t.numberOfFacesOnLargestDie&&(n=t.numberOfFacesOnLargestDie)),{roll:function(t){var e=t.trim().split(" ").map(a);return(e=e.filter(o)).map(u)}}}},{"lodash.isobject":44,probable:24}],24:[function(t,e,n){function r(t){var e=Math.random;function n(t){return Math.floor(e()*t)}function r(t){var e=t,r=e[e.length-1][0][1]-e[0][0][0]+1;function o(t){return function(t,e){e=+e;for(var n=0;n<t.length;++n){var r=t[n],o=r[0];if(e>=o[0]&&e<=o[1])return r[1]}}(e,t)}return{outcomeAtIndex:o,roll:function(){var t=o(n(r));return"function"==typeof t?t():t},length:r,getRangesAndOutcomesArray:function(){return e}}}function o(t){var e=[],n=-1,r=function(t){var e=[];for(var n in t){var r=t[n];e.push([r,n])}return e}(t);return(r=r.sort(i)).forEach(function(t){var r=t[0],o=t[1],i=n+1,a=i+r-1;e.push([[i,a],o]),n=a}),e}function i(t,e){return t[0]>e[0]?-1:1}function a(t){return r(function(t){var e=[];for(var n in t){var r=s(n),o=t[n];if("object"==typeof o)if(Array.isArray(o))o=c(o);else{var i=a(o);"function"==typeof i.roll&&(o=i.roll)}e.push([r,o])}return e}(t))}function s(t){var e=t.split("-");if(!(e.length>2))return 1===e.length?[+t,+t]:[+e[0],+e[1]]}function u(t,e){return!t||"number"!=typeof t.length||t.length<1?e:t[n(t.length)]}function c(t,e){return function(){return u(t,e)}}function l(t,e){var n=[];return t.forEach(function(t){e.forEach(function(e){Array.isArray(t)||Array.isArray(e)?n.push(t.concat(e)):n.push([t,e])})}),n}function f(t){for(var e,r=t.length,o=Array(r),i=0;i<r;i++)(e=n(i+1))!==i&&(o[i]=o[e]),o[e]=t[i];return o}return t&&t.random&&(e=t.random),{roll:n,rollDie:function(t){return 0===t?0:n(t)+1},createRangeTable:r,createRangeTableFromDict:function(t){return r(o(t))},createTableFromDef:a,convertDictToRangesAndOutcomePairs:o,pickFromArray:u,crossArrays:l,getCartesianProduct:function(t){return t.slice(1).reduce(l,t[0])},shuffle:f,sample:function(t,e){return f(t).slice(0,e)}}}var o=r();"object"==typeof e&&(e.exports=o,e.exports.createProbable=r)},{}],25:[function(t,e,n){function r(t){var e=t.length,n=[];if(e>1){n=new Array(e-1);for(var r=1;r<e;++r)n[r-1]=t[r]}return n}e.exports=async function(t){var e=r(arguments);return new Promise(function(n){e.push(function(t){n({error:t,values:r(arguments)})}),t.apply(t,e)})}},{}],26:[function(t,e,n){e.exports=function(t,e){var n=t;if(e.every(function(t){return n=n[t]},!0))return n}},{}],27:[function(t,e,n){e.exports=function(t){if(t){console.error(t,t.stack);var e="";t.name&&(e+=t.name+": "),e+=t.message,t.stack&&(e+=" | "+t.stack.toString()),function(t){var e=document.getElementById("status-message");e.textContent=t,e.classList.remove("hidden")}(e)}}},{}],28:[function(t,e,n){var r=t("lodash._baseisequal"),o=t("lodash._bindcallback"),i=t("lodash.isarray"),a=t("lodash.pairs"),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,u=/^\w*$/,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,l=/\\(\\)?/g;function f(t,e,n){if(null!=t){void 0!==n&&n in d(t)&&(e=[n]);for(var r=0,o=e.length;null!=t&&r<o;)t=t[e[r++]];return r&&r==o?t:void 0}}function h(t,e){var n=typeof t;return!!("string"==n&&u.test(t)||"number"==n)||!i(t)&&(!s.test(t)||null!=e&&t in d(e))}function p(t){return t==t&&!v(t)}function d(t){return v(t)?t:Object(t)}function y(t){if(i(t))return t;var e=[];return function(t){return null==t?"":t+""}(t).replace(c,function(t,n,r,o){e.push(r?o.replace(l,"$1"):n||t)}),e}function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function _(t){return t}e.exports=function(t,e,n){var s,u,c=typeof t;return"function"==c?void 0===e?t:o(t,e,n):null==t?_:"object"==c?function(t){var e=function(t){for(var e=a(t),n=e.length;n--;)e[n][2]=p(e[n][1]);return e}(t);if(1==e.length&&e[0][2]){var n=e[0][0],o=e[0][1];return function(t){return null!=t&&t[n]===o&&(void 0!==o||n in d(t))}}return function(t){return function(t,e,n){var o=e.length,i=o,a=!n;if(null==t)return!i;for(t=d(t);o--;){var s=e[o];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<i;){var u=(s=e[o])[0],c=t[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var f=n?n(c,l,u):void 0;if(!(void 0===f?r(l,c,n,!0):f))return!1}}return!0}(t,e)}}(t):void 0===e?h(s=t)?(u=s,function(t){return null==t?void 0:t[u]}):function(t){var e=t+"";return t=y(t),function(n){return f(n,t,e)}}(s):function(t,e){var n=i(t),o=h(t)&&p(e),a=t+"";return t=y(t),function(i){if(null==i)return!1;var s,u,c=a;if(i=d(i),(n||!o)&&!(c in i)){if(null==(i=1==t.length?i:f(i,function(t,e,n){var r=-1,o=t.length;(e=null==e?0:+e||0)<0&&(e=-e>o?0:o+e),(n=void 0===n||n>o?o:+n||0)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}(t,0,-1))))return!1;c=(u=(s=t)?s.length:0)?s[u-1]:void 0,i=d(i)}return i[c]===e?void 0!==e||c in i:r(e,i[c],void 0,!0)}}(t,e)}},{"lodash._baseisequal":32,"lodash._bindcallback":35,"lodash.isarray":43,"lodash.pairs":47}],29:[function(t,e,n){var r,o,i=t("lodash.keys"),a=9007199254740991,s=(r=function(t,e){return u(t,e,i)},function(t,e){var n,i=t?l(t):0;if(!("number"==typeof(n=i)&&n>-1&&n%1==0&&n<=a))return r(t,e);for(var s=o?i:-1,u=f(t);(o?s--:++s<i)&&!1!==e(u[s],s,u););return t}),u=function(t){return function(e,n,r){for(var o=f(e),i=r(e),a=i.length,s=t?a:-1;t?s--:++s<a;){var u=i[s];if(!1===n(o[u],u,o))break}return e}}();var c,l=(c="length",function(t){return null==t?void 0:t[c]});function f(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?t:Object(t)}e.exports=s},{"lodash.keys":46}],30:[function(t,e,n){e.exports=function(t,e,n,r){var o;return n(t,function(t,n,i){if(e(t,n,i))return o=r?n:t,!1}),o}},{}],31:[function(t,e,n){e.exports=function(t,e,n){for(var r=t.length,o=n?r:-1;n?o--:++o<r;)if(e(t[o],o,t))return o;return-1}},{}],32:[function(t,e,n){var r=t("lodash.isarray"),o=t("lodash.istypedarray"),i=t("lodash.keys"),a="[object Arguments]",s="[object Array]",u="[object Boolean]",c="[object Date]",l="[object Error]",f="[object Number]",h="[object Object]",p="[object RegExp]",d="[object String]";var y=Object.prototype,v=y.hasOwnProperty,_=y.toString;function g(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}e.exports=function t(e,n,y,m,b,x){return e===n||(null==e||null==n||!function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(e)&&!function(t){return!!t&&"object"==typeof t}(n)?e!=e&&n!=n:function(t,e,n,y,m,b,x){var w=r(t),k=r(e),T=s,j=s;w||((T=_.call(t))==a?T=h:T!=h&&(w=o(t))),k||((j=_.call(e))==a?j=h:j!=h&&(k=o(e)));var A=T==h,O=j==h,S=T==j;if(S&&!w&&!A)return function(t,e,n){switch(n){case u:case c:return+t==+e;case l:return t.name==e.name&&t.message==e.message;case f:return t!=+t?e!=+e:t==+e;case p:case d:return t==e+""}return!1}(t,e,T);if(!m){var M=A&&v.call(t,"__wrapped__"),E=O&&v.call(e,"__wrapped__");if(M||E)return n(M?t.value():t,E?e.value():e,y,m,b,x)}if(!S)return!1;b||(b=[]),x||(x=[]);for(var I=b.length;I--;)if(b[I]==t)return x[I]==e;b.push(t),x.push(e);var N=(w?function(t,e,n,r,o,i,a){var s=-1,u=t.length,c=e.length;if(u!=c&&!(o&&c>u))return!1;for(;++s<u;){var l=t[s],f=e[s],h=r?r(o?f:l,o?l:f,s):void 0;if(void 0!==h){if(h)continue;return!1}if(o){if(!g(e,function(t){return l===t||n(l,t,r,o,i,a)}))return!1}else if(l!==f&&!n(l,f,r,o,i,a))return!1}return!0}:function(t,e,n,r,o,a,s){var u=i(t),c=u.length,l=i(e).length;if(c!=l&&!o)return!1;for(var f=c;f--;){var h=u[f];if(!(o?h in e:v.call(e,h)))return!1}for(var p=o;++f<c;){h=u[f];var d=t[h],y=e[h],_=r?r(o?y:d,o?d:y,h):void 0;if(!(void 0===_?n(d,y,r,o,a,s):_))return!1;p||(p="constructor"==h)}if(!p){var g=t.constructor,m=e.constructor;if(g!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m))return!1}return!0})(t,e,n,y,m,b,x);return b.pop(),x.pop(),N}(e,n,t,y,m,b,x))}},{"lodash.isarray":43,"lodash.istypedarray":45,"lodash.keys":46}],33:[function(t,e,n){var r=t("lodash._baseisequal");e.exports=function(t,e,n){var o,i=e.length,a=i,s=!n;if(null==t)return!a;for(t=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(o=t)?o:Object(o);i--;){var u=e[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){var c=(u=e[i])[0],l=t[c],f=u[1];if(s&&u[2]){if(void 0===l&&!(c in t))return!1}else{var h=n?n(l,f,c):void 0;if(!(void 0===h?r(f,l,n,!0):h))return!1}}return!0}},{"lodash._baseisequal":32}],34:[function(t,e,n){var r=t("lodash._baseismatch"),o=t("lodash.pairs");function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=function(t){var e=function(t){for(var e,n=o(t),r=n.length;r--;)n[r][2]=(e=n[r][1])==e&&!i(e);return n}(t);if(1==e.length&&e[0][2]){var n=e[0][0],a=e[0][1];return function(t){return null!=t&&t[n]===a&&(void 0!==a||n in function(t){return i(t)?t:Object(t)}(t))}}return function(t){return r(t,e)}}},{"lodash._baseismatch":33,"lodash.pairs":47}],35:[function(t,e,n){function r(t){return t}e.exports=function(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,a){return t.call(e,n,r,o,i,a)}}return function(){return t.apply(e,arguments)}}},{}],36:[function(t,e,n){var r="[object Function]",o=/^\[object .+?Constructor\]$/;var i=Object.prototype,a=Function.prototype.toString,s=i.hasOwnProperty,u=i.toString,c=RegExp("^"+a.call(s).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(t,e){var n=null==t?void 0:t[e];return function(t){return null!=t&&(function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&u.call(t)==r}(t)?c.test(a.call(t)):function(t){return!!t&&"object"==typeof t}(t)&&o.test(t))}(n)?n:void 0}},{}],37:[function(t,e,n){(function(t){var r=200,o="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",s="[object Boolean]",u="[object Date]",c="[object Function]",l="[object GeneratorFunction]",f="[object Map]",h="[object Number]",p="[object Object]",d="[object RegExp]",y="[object Set]",v="[object String]",_="[object Symbol]",g="[object ArrayBuffer]",m="[object DataView]",b="[object Float32Array]",x="[object Float64Array]",w="[object Int8Array]",k="[object Int16Array]",T="[object Int32Array]",j="[object Uint8Array]",A="[object Uint8ClampedArray]",O="[object Uint16Array]",S="[object Uint32Array]",M=/\w*$/,E=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,N={};N[a]=N["[object Array]"]=N[g]=N[m]=N[s]=N[u]=N[b]=N[x]=N[w]=N[k]=N[T]=N[f]=N[h]=N[p]=N[d]=N[y]=N[v]=N[_]=N[j]=N[A]=N[O]=N[S]=!0,N["[object Error]"]=N[c]=N["[object WeakMap]"]=!1;var P="object"==typeof t&&t&&t.Object===Object&&t,C="object"==typeof self&&self&&self.Object===Object&&self,R=P||C||Function("return this")(),D="object"==typeof n&&n&&!n.nodeType&&n,q=D&&"object"==typeof e&&e&&!e.nodeType&&e,F=q&&q.exports===D;function L(t,e){return t.set(e[0],e[1]),t}function W(t,e){return t.add(e),t}function B(t,e,n,r){var o=-1,i=t?t.length:0;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function H(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function $(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function z(t,e){return function(n){return t(e(n))}}function G(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}var U,Y=Array.prototype,K=Function.prototype,V=Object.prototype,X=R["__core-js_shared__"],Q=(U=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+U:"",J=K.toString,Z=V.hasOwnProperty,tt=V.toString,et=RegExp("^"+J.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=F?R.Buffer:void 0,rt=R.Symbol,ot=R.Uint8Array,it=z(Object.getPrototypeOf,Object),at=Object.create,st=V.propertyIsEnumerable,ut=Y.splice,ct=Object.getOwnPropertySymbols,lt=nt?nt.isBuffer:void 0,ft=z(Object.keys,Object),ht=qt(R,"DataView"),pt=qt(R,"Map"),dt=qt(R,"Promise"),yt=qt(R,"Set"),vt=qt(R,"WeakMap"),_t=qt(Object,"create"),gt=Ht(ht),mt=Ht(pt),bt=Ht(dt),xt=Ht(yt),wt=Ht(vt),kt=rt?rt.prototype:void 0,Tt=kt?kt.valueOf:void 0;function jt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function At(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ot(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function St(t){this.__data__=new At(t)}function Mt(t,e){var n=zt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Gt(t)}(t)&&Z.call(t,"callee")&&(!st.call(t,"callee")||tt.call(t)==a)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,o=!!r;for(var i in t)!e&&!Z.call(t,i)||o&&("length"==i||Wt(i,r))||n.push(i);return n}function Et(t,e,n){var r=t[e];Z.call(t,e)&&$t(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function It(t,e){for(var n=t.length;n--;)if($t(t[n][0],e))return n;return-1}function Nt(t,e,n,r,o,i,E){var I;if(r&&(I=i?r(t,o,i,E):r(t)),void 0!==I)return I;if(!Kt(t))return t;var P=zt(t);if(P){if(I=function(t){var e=t.length,n=t.constructor(e);e&&"string"==typeof t[0]&&Z.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!e)return function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(t,I)}else{var C=Lt(t),R=C==c||C==l;if(Ut(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(C==p||C==a||R&&!i){if(H(t))return i?t:{};if(I=function(t){return"function"!=typeof t.constructor||Bt(t)?{}:(e=it(t),Kt(e)?at(e):{});var e}(R?{}:t),!e)return function(t,e){return Rt(t,Ft(t),e)}(t,function(t,e){return t&&Rt(e,Vt(e),t)}(I,t))}else{if(!N[C])return i?t:{};I=function(t,e,n,r){var o=t.constructor;switch(e){case g:return Ct(t);case s:case u:return new o(+t);case m:return function(t,e){var n=e?Ct(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,r);case b:case x:case w:case k:case T:case j:case A:case O:case S:return function(t,e){var n=e?Ct(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,r);case f:return function(t,e,n){return B(e?n($(t),!0):$(t),L,new t.constructor)}(t,r,n);case h:case v:return new o(t);case d:return(c=new(a=t).constructor(a.source,M.exec(a))).lastIndex=a.lastIndex,c;case y:return function(t,e,n){return B(e?n(G(t),!0):G(t),W,new t.constructor)}(t,r,n);case _:return i=t,Tt?Object(Tt.call(i)):{}}var i;var a,c}(t,C,Nt,e)}}E||(E=new St);var D=E.get(t);if(D)return D;if(E.set(t,I),!P)var q=n?function(t){return function(t,e,n){var r=e(t);return zt(t)?r:function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}(r,n(t))}(t,Vt,Ft)}(t):Vt(t);return function(t,e){for(var n=-1,r=t?t.length:0;++n<r&&!1!==e(t[n],n,t););}(q||t,function(o,i){q&&(o=t[i=o]),Et(I,i,Nt(o,e,n,r,i,t,E))}),I}function Pt(t){return!(!Kt(t)||Q&&Q in t)&&(Yt(t)||H(t)?et:E).test(Ht(t))}function Ct(t){var e=new t.constructor(t.byteLength);return new ot(e).set(new ot(t)),e}function Rt(t,e,n,r){n||(n={});for(var o=-1,i=e.length;++o<i;){var a=e[o],s=r?r(n[a],t[a],a,n,t):void 0;Et(n,a,void 0===s?t[a]:s)}return n}function Dt(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function qt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Pt(n)?n:void 0}jt.prototype.clear=function(){this.__data__=_t?_t(null):{}},jt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},jt.prototype.get=function(t){var e=this.__data__;if(_t){var n=e[t];return n===o?void 0:n}return Z.call(e,t)?e[t]:void 0},jt.prototype.has=function(t){var e=this.__data__;return _t?void 0!==e[t]:Z.call(e,t)},jt.prototype.set=function(t,e){return this.__data__[t]=_t&&void 0===e?o:e,this},At.prototype.clear=function(){this.__data__=[]},At.prototype.delete=function(t){var e=this.__data__,n=It(e,t);return!(n<0||(n==e.length-1?e.pop():ut.call(e,n,1),0))},At.prototype.get=function(t){var e=this.__data__,n=It(e,t);return n<0?void 0:e[n][1]},At.prototype.has=function(t){return It(this.__data__,t)>-1},At.prototype.set=function(t,e){var n=this.__data__,r=It(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},Ot.prototype.clear=function(){this.__data__={hash:new jt,map:new(pt||At),string:new jt}},Ot.prototype.delete=function(t){return Dt(this,t).delete(t)},Ot.prototype.get=function(t){return Dt(this,t).get(t)},Ot.prototype.has=function(t){return Dt(this,t).has(t)},Ot.prototype.set=function(t,e){return Dt(this,t).set(t,e),this},St.prototype.clear=function(){this.__data__=new At},St.prototype.delete=function(t){return this.__data__.delete(t)},St.prototype.get=function(t){return this.__data__.get(t)},St.prototype.has=function(t){return this.__data__.has(t)},St.prototype.set=function(t,e){var n=this.__data__;if(n instanceof At){var o=n.__data__;if(!pt||o.length<r-1)return o.push([t,e]),this;n=this.__data__=new Ot(o)}return n.set(t,e),this};var Ft=ct?z(ct,Object):function(){return[]},Lt=function(t){return tt.call(t)};function Wt(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||I.test(t))&&t>-1&&t%1==0&&t<e}function Bt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||V)}function Ht(t){if(null!=t){try{return J.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function $t(t,e){return t===e||t!=t&&e!=e}(ht&&Lt(new ht(new ArrayBuffer(1)))!=m||pt&&Lt(new pt)!=f||dt&&"[object Promise]"!=Lt(dt.resolve())||yt&&Lt(new yt)!=y||vt&&"[object WeakMap]"!=Lt(new vt))&&(Lt=function(t){var e=tt.call(t),n=e==p?t.constructor:void 0,r=n?Ht(n):void 0;if(r)switch(r){case gt:return m;case mt:return f;case bt:return"[object Promise]";case xt:return y;case wt:return"[object WeakMap]"}return e});var zt=Array.isArray;function Gt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!Yt(t)}var Ut=lt||function(){return!1};function Yt(t){var e=Kt(t)?tt.call(t):"";return e==c||e==l}function Kt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Vt(t){return Gt(t)?Mt(t):function(t){if(!Bt(t))return ft(t);var e=[];for(var n in Object(t))Z.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}e.exports=function(t){return Nt(t,!0,!0)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],38:[function(t,e,n){(function(t){var n="Expected a function",r="__lodash_placeholder__",o=1,i=2,a=4,s=8,u=16,c=32,l=64,f=128,h=512,p=1/0,d=9007199254740991,y=1.7976931348623157e308,v=NaN,_=[["ary",f],["bind",o],["bindKey",i],["curry",s],["curryRight",u],["flip",h],["partial",c],["partialRight",l],["rearg",256]],g="[object Function]",m="[object GeneratorFunction]",b="[object Symbol]",x=/^\s+|\s+$/g,w=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,k=/\{\n\/\* \[wrapped with (.+)\] \*/,T=/,? & /,j=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,O=/^\[object .+?Constructor\]$/,S=/^0o[0-7]+$/i,M=/^(?:0|[1-9]\d*)$/,E=parseInt,I="object"==typeof t&&t&&t.Object===Object&&t,N="object"==typeof self&&self&&self.Object===Object&&self,P=I||N||Function("return this")();function C(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function R(t,e){return!!(t?t.length:0)&&function(t,e,n){if(e!=e)return function(t,e,n,r){var o=t.length,i=n+(r?1:-1);for(;r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,D,n);var r=n-1,o=t.length;for(;++r<o;)if(t[r]===e)return r;return-1}(t,e,0)>-1}function D(t){return t!=t}function q(t,e){for(var n=-1,o=t.length,i=0,a=[];++n<o;){var s=t[n];s!==e&&s!==r||(t[n]=r,a[i++]=n)}return a}var F,L,W,B=Function.prototype,H=Object.prototype,$=P["__core-js_shared__"],z=(F=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"",G=B.toString,U=H.hasOwnProperty,Y=H.toString,K=RegExp("^"+G.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=Object.create,X=Math.max,Q=Math.min,J=(L=it(Object,"defineProperty"),(W=it.name)&&W.length>2?L:void 0);function Z(t){return!(!ct(t)||z&&z in t)&&(function(t){var e=ct(t)?Y.call(t):"";return e==g||e==m}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?K:O).test(function(t){if(null!=t){try{return G.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function tt(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n,r=ct(n=t.prototype)?V(n):{},o=t.apply(r,e);return ct(o)?o:r}}function et(t,e,n,r,a,c,l,p,d,y){var v=e&f,_=e&o,g=e&i,m=e&(s|u),b=e&h,x=g?void 0:tt(t);return function o(){for(var i=arguments.length,s=Array(i),u=i;u--;)s[u]=arguments[u];if(m)var f=ot(o),h=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&r++;return r}(s,f);if(r&&(s=function(t,e,n,r){for(var o=-1,i=t.length,a=n.length,s=-1,u=e.length,c=X(i-a,0),l=Array(u+c),f=!r;++s<u;)l[s]=e[s];for(;++o<a;)(f||o<i)&&(l[n[o]]=t[o]);for(;c--;)l[s++]=t[o++];return l}(s,r,a,m)),c&&(s=function(t,e,n,r){for(var o=-1,i=t.length,a=-1,s=n.length,u=-1,c=e.length,l=X(i-s,0),f=Array(l+c),h=!r;++o<l;)f[o]=t[o];for(var p=o;++u<c;)f[p+u]=e[u];for(;++a<s;)(h||o<i)&&(f[p+n[a]]=t[o++]);return f}(s,c,l,m)),i-=h,m&&i<y){var w=q(s,f);return nt(t,e,et,o.placeholder,n,s,w,p,d,y-i)}var k=_?n:this,T=g?k[t]:t;return i=s.length,p?s=function(t,e){for(var n=t.length,r=Q(e.length,n),o=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(t);r--;){var i=e[r];t[r]=at(i,n)?o[i]:void 0}return t}(s,p):b&&i>1&&s.reverse(),v&&d<i&&(s.length=d),this&&this!==P&&this instanceof o&&(T=x||tt(T)),T.apply(k,s)}}function nt(t,e,n,r,u,f,h,p,d,y){var v=e&s;e|=v?c:l,(e&=~(v?l:c))&a||(e&=~(o|i));var _=n(t,e,u,v?f:void 0,v?h:void 0,v?void 0:f,v?void 0:h,p,d,y);return _.placeholder=r,st(_,t,e)}function rt(t,e,r,a,f,h,p,d){var y=e&i;if(!y&&"function"!=typeof t)throw new TypeError(n);var v=a?a.length:0;if(v||(e&=~(c|l),a=f=void 0),p=void 0===p?p:X(ft(p),0),d=void 0===d?d:ft(d),v-=f?f.length:0,e&l){var _=a,g=f;a=f=void 0}var m=[t,e,r,a,f,_,g,h,p,d];if(t=m[0],e=m[1],r=m[2],a=m[3],f=m[4],!(d=m[9]=null==m[9]?y?0:t.length:X(m[9]-v,0))&&e&(s|u)&&(e&=~(s|u)),e&&e!=o)b=e==s||e==u?function(t,e,n){var r=tt(t);return function o(){for(var i=arguments.length,a=Array(i),s=i,u=ot(o);s--;)a[s]=arguments[s];var c=i<3&&a[0]!==u&&a[i-1]!==u?[]:q(a,u);return(i-=c.length)<n?nt(t,e,et,o.placeholder,void 0,a,c,void 0,void 0,n-i):C(this&&this!==P&&this instanceof o?r:t,this,a)}}(t,e,d):e!=c&&e!=(o|c)||f.length?et.apply(void 0,m):function(t,e,n,r){var i=e&o,a=tt(t);return function e(){for(var o=-1,s=arguments.length,u=-1,c=r.length,l=Array(c+s),f=this&&this!==P&&this instanceof e?a:t;++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++o];return C(f,i?n:this,l)}}(t,e,r,a);else var b=function(t,e,n){var r=e&o,i=tt(t);return function e(){return(this&&this!==P&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,r);return st(b,t,e)}function ot(t){return t.placeholder}function it(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Z(n)?n:void 0}function at(t,e){return!!(e=null==e?d:e)&&("number"==typeof t||M.test(t))&&t>-1&&t%1==0&&t<e}var st=J?function(t,e,n){var r,o=e+"";return J(t,"toString",{configurable:!0,enumerable:!1,value:(r=function(t,e){var n=e.length,r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(w,"{\n/* [wrapped with "+e+"] */\n")}(o,function(t,e){return function(t,e){for(var n=-1,r=t?t.length:0;++n<r&&!1!==e(t[n],n,t););}(_,function(n){var r="_."+n[0];e&n[1]&&!R(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(k);return e?e[1].split(T):[]}(o),n)),function(){return r})})}:function(t){return t};function ut(t,e,n){var r=rt(t,s,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=ut.placeholder,r}function ct(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function lt(t){return t?(t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&Y.call(t)==b}(t))return v;if(ct(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ct(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(x,"");var n=A.test(t);return n||S.test(t)?E(t.slice(2),n?2:8):j.test(t)?v:+t}(t))===p||t===-p?(t<0?-1:1)*y:t==t?t:0:0===t?t:0}function ft(t){var e=lt(t),n=e%1;return e==e?n?e-n:e:0}ut.placeholder={},e.exports=ut}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],39:[function(t,e,n){var r=9007199254740991,o="[object Arguments]",i="[object Function]",a="[object GeneratorFunction]",s=/^(?:0|[1-9]\d*)$/;function u(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var c=Object.prototype,l=c.hasOwnProperty,f=c.toString,h=c.propertyIsEnumerable,p=Math.max;function d(t,e){var n=x(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&w(t)}(t)&&l.call(t,"callee")&&(!h.call(t,"callee")||f.call(t)==o)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,i=!!r;for(var a in t)!e&&!l.call(t,a)||i&&("length"==a||m(a,r))||n.push(a);return n}function y(t,e,n,r){return void 0===t||b(t,c[n])&&!l.call(r,n)?e:t}function v(t,e,n){var r=t[e];l.call(t,e)&&b(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function _(t){if(!k(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e,n,r,o=(n=(e=t)&&e.constructor,r="function"==typeof n&&n.prototype||c,e===r),i=[];for(var a in t)("constructor"!=a||!o&&l.call(t,a))&&i.push(a);return i}function g(t,e){return e=p(void 0===e?t.length-1:e,0),function(){for(var n=arguments,r=-1,o=p(n.length-e,0),i=Array(o);++r<o;)i[r]=n[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=n[r];return a[e]=i,u(t,this,a)}}function m(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||s.test(t))&&t>-1&&t%1==0&&t<e}function b(t,e){return t===e||t!=t&&e!=e}var x=Array.isArray;function w(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!function(t){var e=k(t)?f.call(t):"";return e==i||e==a}(t)}function k(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var T,j=(T=function(t,e,n,r){!function(t,e,n,r){n||(n={});for(var o=-1,i=e.length;++o<i;){var a=e[o],s=r?r(n[a],t[a],a,n,t):void 0;v(n,a,void 0===s?t[a]:s)}}(e,function(t){return w(t)?d(t,!0):_(t)}(e),t,r)},g(function(t,e){var n=-1,r=e.length,o=r>1?e[r-1]:void 0,i=r>2?e[2]:void 0;for(o=T.length>3&&"function"==typeof o?(r--,o):void 0,i&&function(t,e,n){if(!k(n))return!1;var r=typeof e;return!!("number"==r?w(n)&&m(e,n.length):"string"==r&&e in n)&&b(n[e],t)}(e[0],e[1],i)&&(o=r<3?void 0:o,r=1),t=Object(t);++n<r;){var a=e[n];a&&T(t,a,n,o)}return t})),A=g(function(t){return t.push(void 0,y),u(j,void 0,t)});e.exports=A},{}],40:[function(t,e,n){var r=t("lodash._basecallback"),o=t("lodash._baseeach"),i=t("lodash._basefind"),a=t("lodash._basefindindex"),s=t("lodash.isarray");var u,c,l=(u=o,function(t,e,n){if(e=r(e,n,3),s(t)){var o=a(t,e,c);return o>-1?t[o]:void 0}return i(t,e,u)});e.exports=l},{"lodash._basecallback":28,"lodash._baseeach":29,"lodash._basefind":30,"lodash._basefindindex":31,"lodash.isarray":43}],41:[function(t,e,n){var r=t("lodash._basematches"),o=t("lodash.find");e.exports=function(t,e){return o(t,r(e))}},{"lodash._basematches":34,"lodash.find":40}],42:[function(t,e,n){var r=9007199254740991,o="[object Arguments]",i="[object Function]",a="[object GeneratorFunction]",s=Object.prototype,u=s.hasOwnProperty,c=s.toString,l=s.propertyIsEnumerable;e.exports=function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?c.call(t):"";return e==i||e==a}(t)}(t)}(t)&&u.call(t,"callee")&&(!l.call(t,"callee")||c.call(t)==o)}},{}],43:[function(t,e,n){var r="[object Function]",o=/^\[object .+?Constructor\]$/;function i(t){return!!t&&"object"==typeof t}var a,s,u=Object.prototype,c=Function.prototype.toString,l=u.hasOwnProperty,f=u.toString,h=RegExp("^"+c.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),p=9007199254740991;var d=(a=Array,function(t){return null!=t&&(function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&f.call(t)==r}(t)?h.test(c.call(t)):i(t)&&o.test(t))}(s=null==a?void 0:a["isArray"])?s:void 0)||function(t){return i(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}(t.length)&&"[object Array]"==f.call(t)};e.exports=d},{}],44:[function(t,e,n){e.exports=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}},{}],45:[function(t,e,n){var r=9007199254740991,o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1;var i=Object.prototype.toString;e.exports=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!!o[i.call(t)]}},{}],46:[function(t,e,n){var r=t("lodash._getnative"),o=t("lodash.isarguments"),i=t("lodash.isarray"),a=/^\d+$/,s=Object.prototype.hasOwnProperty,u=r(Object,"keys"),c=9007199254740991;var l,f=(l="length",function(t){return null==t?void 0:t[l]});function h(t,e){return t="number"==typeof t||a.test(t)?+t:-1,e=null==e?c:e,t>-1&&t%1==0&&t<e}function p(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function d(t){for(var e=function(t){if(null==t)return[];y(t)||(t=Object(t));var e=t.length;e=e&&p(e)&&(i(t)||o(t))&&e||0;var n=t.constructor,r=-1,a="function"==typeof n&&n.prototype===t,u=Array(e),c=e>0;for(;++r<e;)u[r]=r+"";for(var l in t)c&&h(l,e)||"constructor"==l&&(a||!s.call(t,l))||u.push(l);return u}(t),n=e.length,r=n&&t.length,a=!!r&&p(r)&&(i(t)||o(t)),u=-1,c=[];++u<n;){var l=e[u];(a&&h(l,r)||s.call(t,l))&&c.push(l)}return c}function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var v=u?function(t){var e,n=null==t?void 0:t.constructor;return"function"==typeof n&&n.prototype===t||"function"!=typeof t&&(null!=(e=t)&&p(f(e)))?d(t):y(t)?u(t):[]}:d;e.exports=v},{"lodash._getnative":36,"lodash.isarguments":42,"lodash.isarray":43}],47:[function(t,e,n){var r=t("lodash.keys");e.exports=function(t){var e;t=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(e=t)?e:Object(e);for(var n=-1,o=r(t),i=o.length,a=Array(i);++n<i;){var s=o[n];a[n]=[s,t[s]]}return a}},{"lodash.keys":46}],48:[function(t,e,n){e.exports=function(){var t={};return{setListener:e,on:function(t,n,r){e({eventName:n,listener:r,element:document.querySelector(t)})}};function e({eventName:e,listener:n,element:r}){const o=`${r.id}|${e}`;var i=t[o];i&&r.removeEventListener(e,i),r.addEventListener(e,n),t[o]=n}}},{}],49:[function(t,e,n){function r(t){var e=Math.random,n=!0;function r(t){return Math.floor(e()*t)}function o(t){var e=t,n=e[e.length-1][0][1]-e[0][0][0]+1;function o(t){return function(t,e){e=+e;for(var n=0;n<t.length;++n){var r=t[n],o=r[0];if(e>=o[0]&&e<=o[1])return r[1]}}(e,t)}return{outcomeAtIndex:o,roll:function(){var t=o(r(n));return"function"!=typeof t||"probable_rollOnTable"!==t.name&&"probable_pick"!==t.name?t:t()},length:n,getRangesAndOutcomesArray:function(){return e}}}function i(t){var e=[],n=-1,r=function(t){var e=[];for(var n in t){var r=t[n];e.push([r,n])}return e}(t);return(r=r.sort(a)).forEach(function(t){var r=t[0],o=t[1],i=n+1,a=i+r-1;e.push([[i,a],o]),n=a}),e}function a(t,e){return t[0]>e[0]?-1:1}function s(t){return o(function(t){var e=[];for(var r in t){var o=c(r),i=t[r];if("object"==typeof i)if(Array.isArray(i))i=h(i);else if(n){var a=s(i);"function"==typeof a.roll&&(i=a.roll)}e.push([o,i])}return e.sort(u)}(t))}function u(t,e){return t[0][0]<e[0][0]?-1:1}function c(t){var e=t.split("-");if(!(e.length>2))return 1===e.length?[+t,+t]:[+e[0],+e[1]]}function l(t){return o(function(t){var e=0;return t.map(function(t){var n=t[0],r=t[1],o=e+n-1,i=[e,o];if(e=o+1,Array.isArray(r))if(s=r,Array.isArray(s)&&s.length>0&&Array.isArray(s[0])&&2===s[0].length&&"number"==typeof s[0][0]){var a=l(r);"function"==typeof a.roll&&(r=a.roll)}else r=h(r);var s;return[i,r]})}(t))}function f(t,e){return!t||"number"!=typeof t.length||t.length<1?e:t[r(t.length)]}function h(t,e){return function(){return f(t,e)}}function p(t,e){var n=[];return t.forEach(function(t){e.forEach(function(e){Array.isArray(t)||Array.isArray(e)?n.push(t.concat(e)):n.push([t,e])})}),n}function d(t){for(var e,n=t.length,o=Array(n),i=0;i<n;i++)(e=r(i+1))!==i&&(o[i]=o[e]),o[e]=t[i];return o}return t&&(t.random&&(e=t.random),void 0!==t.recurse&&(n=t.recurse)),{roll:r,rollDie:function(t){return 0===t?0:r(t)+1},createRangeTable:o,createRangeTableFromDict:function(t){return o(i(t))},createTableFromDef:s,createTableFromSizes:l,convertDictToRangesAndOutcomePairs:i,pickFromArray:f,pick:f,crossArrays:p,getCartesianProduct:function(t){return t.slice(1).reduce(p,t[0])},shuffle:d,sample:function(t,e){return d(t).slice(0,e)},randomFn:e}}var o=r();"object"==typeof e&&(e.exports=o,e.exports.createProbable=r)},{}],50:[function(t,e,n){"use strict";var r=String.prototype.replace,o=/%20/g,i=t("./utils"),a={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=i.assign({default:a.RFC3986,formatters:{RFC1738:function(t){return r.call(t,o,"+")},RFC3986:function(t){return String(t)}}},a)},{"./utils":54}],51:[function(t,e,n){"use strict";var r=t("./stringify"),o=t("./parse"),i=t("./formats");e.exports={formats:i,parse:o,stringify:r}},{"./formats":50,"./parse":52,"./stringify":53}],52:[function(t,e,n){"use strict";var r=t("./utils"),o=Object.prototype.hasOwnProperty,i=Array.isArray,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(t){return t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},u=function(t,e,n){if(t){var r=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,i=/(\[[^[\]]*])/g,a=n.depth>0&&/(\[[^[\]]*])/.exec(r),s=a?r.slice(0,a.index):r,u=[];if(s){if(!n.plainObjects&&o.call(Object.prototype,s)&&!n.allowPrototypes)return;u.push(s)}for(var c=0;n.depth>0&&null!==(a=i.exec(r))&&c<n.depth;){if(c+=1,!n.plainObjects&&o.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+r.slice(a.index)+"]"),function(t,e,n){for(var r=e,o=t.length-1;o>=0;--o){var i,a=t[o];if("[]"===a&&n.parseArrays)i=[].concat(r);else{i=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(s,10);n.parseArrays||""!==s?!isNaN(u)&&a!==s&&String(u)===s&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(i=[])[u]=r:i[s]=r:i={0:r}}r=i}return r}(u,e,n)}};e.exports=function(t,e){var n=function(t){if(!t)return a;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?a.charset:t.charset;return{allowDots:void 0===t.allowDots?a.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:a.allowPrototypes,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:a.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:a.comma,decoder:"function"==typeof t.decoder?t.decoder:a.decoder,delimiter:"string"==typeof t.delimiter||r.isRegExp(t.delimiter)?t.delimiter:a.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:a.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:a.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:a.strictNullHandling}}(e);if(""===t||null===t||void 0===t)return n.plainObjects?Object.create(null):{};for(var c="string"==typeof t?function(t,e){var n,u={},c=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,l=e.parameterLimit===1/0?void 0:e.parameterLimit,f=c.split(e.delimiter,l),h=-1,p=e.charset;if(e.charsetSentinel)for(n=0;n<f.length;++n)0===f[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[n]?p="utf-8":"utf8=%26%2310003%3B"===f[n]&&(p="iso-8859-1"),h=n,n=f.length);for(n=0;n<f.length;++n)if(n!==h){var d,y,v=f[n],_=v.indexOf("]="),g=-1===_?v.indexOf("="):_+1;-1===g?(d=e.decoder(v,a.decoder,p,"key"),y=e.strictNullHandling?null:""):(d=e.decoder(v.slice(0,g),a.decoder,p,"key"),y=e.decoder(v.slice(g+1),a.decoder,p,"value")),y&&e.interpretNumericEntities&&"iso-8859-1"===p&&(y=s(y)),y&&"string"==typeof y&&e.comma&&y.indexOf(",")>-1&&(y=y.split(",")),v.indexOf("[]=")>-1&&(y=i(y)?[y]:y),o.call(u,d)?u[d]=r.combine(u[d],y):u[d]=y}return u}(t,n):t,l=n.plainObjects?Object.create(null):{},f=Object.keys(c),h=0;h<f.length;++h){var p=f[h],d=u(p,c[p],n);l=r.merge(l,d,n)}return r.compact(l)}},{"./utils":54}],53:[function(t,e,n){"use strict";var r=t("./utils"),o=t("./formats"),i=Object.prototype.hasOwnProperty,a={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},s=Array.isArray,u=Array.prototype.push,c=function(t,e){u.apply(t,s(e)?e:[e])},l=Date.prototype.toISOString,f=o.default,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,format:f,formatter:o.formatters[f],indices:!1,serializeDate:function(t){return l.call(t)},skipNulls:!1,strictNullHandling:!1},p=function t(e,n,o,i,a,u,l,f,p,d,y,v,_){var g,m=e;if("function"==typeof l?m=l(n,m):m instanceof Date?m=d(m):"comma"===o&&s(m)&&(m=m.join(",")),null===m){if(i)return u&&!v?u(n,h.encoder,_,"key"):n;m=""}if("string"==typeof(g=m)||"number"==typeof g||"boolean"==typeof g||"symbol"==typeof g||"bigint"==typeof g||r.isBuffer(m))return u?[y(v?n:u(n,h.encoder,_,"key"))+"="+y(u(m,h.encoder,_,"value"))]:[y(n)+"="+y(String(m))];var b,x=[];if(void 0===m)return x;if(s(l))b=l;else{var w=Object.keys(m);b=f?w.sort(f):w}for(var k=0;k<b.length;++k){var T=b[k];a&&null===m[T]||(s(m)?c(x,t(m[T],"function"==typeof o?o(n,T):n,o,i,a,u,l,f,p,d,y,v,_)):c(x,t(m[T],n+(p?"."+T:"["+T+"]"),o,i,a,u,l,f,p,d,y,v,_)))}return x};e.exports=function(t,e){var n,r=t,u=function(t){if(!t)return h;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||h.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=o.default;if(void 0!==t.format){if(!i.call(o.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var r=o.formatters[n],a=h.filter;return("function"==typeof t.filter||s(t.filter))&&(a=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:h.addQueryPrefix,allowDots:void 0===t.allowDots?h.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:h.charsetSentinel,delimiter:void 0===t.delimiter?h.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:h.encode,encoder:"function"==typeof t.encoder?t.encoder:h.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:h.encodeValuesOnly,filter:a,formatter:r,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:h.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:h.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:h.strictNullHandling}}(e);"function"==typeof u.filter?r=(0,u.filter)("",r):s(u.filter)&&(n=u.filter);var l,f=[];if("object"!=typeof r||null===r)return"";l=e&&e.arrayFormat in a?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var d=a[l];n||(n=Object.keys(r)),u.sort&&n.sort(u.sort);for(var y=0;y<n.length;++y){var v=n[y];u.skipNulls&&null===r[v]||c(f,p(r[v],v,d,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.formatter,u.encodeValuesOnly,u.charset))}var _=f.join(u.delimiter),g=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),_.length>0?g+_:""}},{"./formats":50,"./utils":54}],54:[function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o=Array.isArray,i=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n};e.exports={arrayToObject:a,assign:function(t,e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n],t},t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var i=e[r],a=i.obj[i.prop],s=Object.keys(a),u=0;u<s.length;++u){var c=s[u],l=a[c];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(e.push({obj:a,prop:c}),n.push(l))}return function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(o(n)){for(var r=[],i=0;i<n.length;++i)void 0!==n[i]&&r.push(n[i]);e.obj[e.prop]=r}}}(e),t},decode:function(t,e,n){var r=t.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(t){return r}},encode:function(t,e,n){if(0===t.length)return t;var r=t;if("symbol"==typeof t?r=Symbol.prototype.toString.call(t):"string"!=typeof t&&(r=String(t)),"iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"});for(var o="",a=0;a<r.length;++a){var s=r.charCodeAt(a);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?o+=r.charAt(a):s<128?o+=i[s]:s<2048?o+=i[192|s>>6]+i[128|63&s]:s<55296||s>=57344?o+=i[224|s>>12]+i[128|s>>6&63]+i[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&r.charCodeAt(a)),o+=i[240|s>>18]+i[128|s>>12&63]+i[128|s>>6&63]+i[128|63&s])}return o},isBuffer:function(t){return!(!t||"object"!=typeof t||!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t)))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,n,i){if(!n)return e;if("object"!=typeof n){if(o(e))e.push(n);else{if(!e||"object"!=typeof e)return[e,n];(i&&(i.plainObjects||i.allowPrototypes)||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(n);var s=e;return o(e)&&!o(n)&&(s=a(e,i)),o(e)&&o(n)?(n.forEach(function(n,o){if(r.call(e,o)){var a=e[o];a&&"object"==typeof a&&n&&"object"==typeof n?e[o]=t(a,n,i):e.push(n)}else e[o]=n}),e):Object.keys(n).reduce(function(e,o){var a=n[o];return r.call(e,o)?e[o]=t(e[o],a,i):e[o]=a,e},s)}}},{}],55:[function(t,e,n){function r(t){return t.statusCode>199&&t.statusCode<300}e.exports=function(t,e){var n;if("object"==typeof t){var{url:o,responseIsOK:i}=t;n=e}else n=t;return i||(i=r),function(t,e,a){if(t)n(t);else if(i(e))n(null,a);else{let t="";t=i===r?`Received status code ${e.statusCode}`:"Bad response",o?t+=` from ${o} `:e.url&&(t+=` from ${e.url} `),t+=".",n(new Error(t))}}}},{}],56:[function(t,e,n){var r=t("qs"),o=t("lodash.clonedeep"),i=t("lodash.defaults");e.exports=function({followRoute:t,windowObject:e,propsToCoerceToBool:n}){var a={};return n||(n=[]),e.onhashchange=s,{addToRoute:function(e,n=!0){var r=i(o(e),u());c(r),n&&t(r,a)},removeFromRoute:function(e,n=!0){var r=u();delete r[e],c(r),n&&t(r,a)},updateEphemeralState:function(e,n=!0){for(var r in e)a[r]=e[r];n&&t(u(),a)},overwriteRouteEntirely:function(e){c(e),t(e,a)},routeFromHash:s,unpackEncodedRoute:function(e){var n=r.parse(decodeURIComponent(e));c(n),t(n,a)},getRouteFromHash:u};function s(){t(u(),a)}function u(){for(var t=r.parse(e.location.hash.slice(1)),o=0;o<n.length;++o){const e=n[o];let r=t[e];r="yes"===r||"no"!=r&&!!r,t[e]=r}return t}function c(t){for(var i=o(t),a=0;a<n.length;++a){const t=n[a];let e=i[t];e=e?"yes":"no",i[t]=e}var s=e.location.protocol+"//"+e.location.host+e.location.pathname+"#"+r.stringify(i);e.history.pushState(null,null,s)}}},{"lodash.clonedeep":37,"lodash.defaults":39,qs:51}],57:[function(t,e,n){var r=t("./lib/alea"),o=t("./lib/xor128"),i=t("./lib/xorwow"),a=t("./lib/xorshift7"),s=t("./lib/xor4096"),u=t("./lib/tychei"),c=t("./seedrandom");c.alea=r,c.xor128=o,c.xorwow=i,c.xorshift7=a,c.xor4096=s,c.tychei=u,e.exports=c},{"./lib/alea":58,"./lib/tychei":59,"./lib/xor128":60,"./lib/xor4096":61,"./lib/xorshift7":62,"./lib/xorwow":63,"./seedrandom":64}],58:[function(t,e,n){!function(t,e,n){function r(t){var e,n=this,r=(e=4022871197,function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function o(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function i(t,e){var n=new r(t),i=e&&e.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+1.1102230246251565e-16*(2097152*a()|0)},a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.alea=i}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],59:[function(t,e,n){!function(t,e,n){function r(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function o(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,o=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^o,e.a=o-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}(t),o=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,o&&("object"==typeof o&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.tychei=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],60:[function(t,e,n){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function o(t,e){var n=new function(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}(t),o=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,o&&("object"==typeof o&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xor128=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],61:[function(t,e,n){!function(t,e,n){function r(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function o(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.w,o=e.X,i=e.i;return e.w=r=r+1640531527|0,n=o[i+34&127],t=o[i=i+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=o[i]=n^t,e.i=i,n+(r^r>>>16)|0},function(t,e){var n,r,o,i,a,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),o=0,i=-32;i<u;++i)e&&(r^=e.charCodeAt((i+32)%e.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=a+1640531527|0,o=0==(n=s[127&i]^=r+a)?o+1:0);for(o>=128&&(s[127&(e&&e.length||0)]=-1),o=127,i=512;i>0;--i)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;t.w=a,t.X=s,t.i=o}(e,t)}(t),o=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,o&&(o.X&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xor4096=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],62:[function(t,e,n){!function(t,e,n){function r(t,e){return e.x=t.x.slice(),e.i=t.i,e}function o(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.x,o=e.i;return t=r[o],n=(t^=t>>>7)^t<<24,n^=(t=r[o+1&7])^t>>>10,n^=(t=r[o+3&7])^t>>>3,n^=(t=r[o+4&7])^t<<7,t=r[o+7&7],n^=(t^=t<<13)^t<<9,r[o]=n,e.i=o+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}(t),o=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,o&&(o.x&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xorshift7=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],63:[function(t,e,n){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function o(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}(t),o=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,o&&("object"==typeof o&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xorwow=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],64:[function(t,e,n){!function(n,r,o){var i,a=256,s=6,u="random",c=o.pow(a,s),l=o.pow(2,52),f=2*l,h=a-1;function p(t,e,p){var _=[],g=y(function t(e,n){var r,o=[],i=typeof e;if(n&&"object"==i)for(r in e)try{o.push(t(e[r],n-1))}catch(t){}return o.length?o:"string"==i?e:e+"\0"}((e=1==e?{entropy:!0}:e||{}).entropy?[t,v(r)]:null==t?function(){try{var t;return i&&(t=i.randomBytes)?t=t(a):(t=new Uint8Array(a),(n.crypto||n.msCrypto).getRandomValues(t)),v(t)}catch(t){var e=n.navigator,o=e&&e.plugins;return[+new Date,n,o,n.screen,v(r)]}}():t,3),_),m=new function(t){var e,n=t.length,r=this,o=0,i=r.i=r.j=0,s=r.S=[];n||(t=[n++]);for(;o<a;)s[o]=o++;for(o=0;o<a;o++)s[o]=s[i=h&i+t[o%n]+(e=s[o])],s[i]=e;(r.g=function(t){for(var e,n=0,o=r.i,i=r.j,s=r.S;t--;)e=s[o=h&o+1],n=n*a+s[h&(s[o]=s[i=h&i+e])+(s[i]=e)];return r.i=o,r.j=i,n})(a)}(_),b=function(){for(var t=m.g(s),e=c,n=0;t<l;)t=(t+n)*a,e*=a,n=m.g(1);for(;t>=f;)t/=2,e/=2,n>>>=1;return(t+n)/e};return b.int32=function(){return 0|m.g(4)},b.quick=function(){return m.g(4)/4294967296},b.double=b,y(v(m.S),r),(e.pass||p||function(t,e,n,r){return r&&(r.S&&d(r,m),t.state=function(){return d(m,{})}),n?(o[u]=t,e):t})(b,g,"global"in e?e.global:this==o,e.state)}function d(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function y(t,e){for(var n,r=t+"",o=0;o<r.length;)e[h&o]=h&(n^=19*e[h&o])+r.charCodeAt(o++);return v(e)}function v(t){return String.fromCharCode.apply(0,t)}if(y(o.random(),r),"object"==typeof e&&e.exports){e.exports=p;try{i=t("crypto")}catch(t){}}else"function"==typeof define&&define.amd?define(function(){return p}):o["seed"+u]=p}("undefined"!=typeof self?self:this,[],Math)},{crypto:17}],65:[function(t,e,n){var r=t("probable").createProbable,o=t("lodash.curry"),i=t("get-at-path"),a=t("dicecup"),s=/{([\S/]+?)}/g;const u=Symbol("resolveTarget"),c=Symbol("resolveFnLaterTarget"),l=Symbol("readFromFirstPass"),f=Symbol("lookUpInMap"),h=Symbol("literal"),p=Symbol("dieRoll");function d(t){return"raw"in t?t[0]:t}function y(t){if(t.length>0)return t[t.length-1]}function v(t,e){return t.concat([e])}function _(t,e,n){return t[i(e,n)]}function g(t,e){return t+isNaN(e.total)?0:e.total}e.exports={Tablenest:function(t){var e;e=t?r({random:t.random,recurse:!1}):r();var n=a({probable:e});return function(t){var n={};for(var r in t){let o=t[r];(!Array.isArray(o)||o.length<1||!Array.isArray(o[0]))&&(o=[[1,o]]),n[r]=e.createTableFromSizes(o)}return function(){for(var t=[],e=[],{expatiated:r}=d(n.root.roll(),null,[],o(b)(n),e,t),i=0;i<10;++i){let n=[];if(e.forEach(o(x)(r,n,t)),t.forEach(o(w)(r)),n.length<1)break;e=n.slice()}return r}};function d(t,e,r,o,i,a){if(!t[u]){if(t[c]&&a.push({fn:t.fn,parent:e,key:y(r)}),t[l]){if(!i)throw new Error("Missing readFromFirstPassQueue!");i.push({keyPathOnSource:r,thing:{[u]:!0,target:t.target}})}else if(t[f]){if(!i)throw new Error("Missing readFromFirstPassQueue!");i.push({keyPathOnSource:t.target.split("/"),targetParent:e,targetKey:y(r),thing:{[u]:!0,target:t.target,map:t.map}})}else t[h]?t=t.target:t[p]&&(t=n.roll(t.target).reduce(g,0));return{expatiated:t,isResolved:!0}}{let n=typeof t.target;if("string"===n)return function(t,e,n,r,o,i){var a=function(t){for(var e,n=[];null!==(e=s.exec(t));)n.push(e[1]);return n}(t);if(a.length<1)return d(r(v(n,t)),e,n,r,o,i);for(var u=t,c=0;c<a.length;++c){let{expatiated:t,isResolved:e}=m(a[c],r,u);if(!e)return{isResolved:e};u=t}return d(u,e,n,r,o,i)}(t.target,e,r,o,i,a);if("object"===n)return function(t,e,n,r,o){var i={};for(var a in t){let{isResolved:s,expatiated:u}=d(t[a],i,v(e,a),n,r,o);if(!s)return{isResolved:s};i[a]=u}return{expatiated:i,isResolved:!0}}(t.target,r,o,i,a)}}function m(t,e,n){var r,o,i,a=(i=(o=t).split("/")).length>0?i.length>1?i:[o]:[],s=n.slice(),d=e(a),y=!((r=d)[u]||r[c]||r[l]||r[f]||r[h]||r[p]);return y&&(s=s.replace(`{${t}}`,d)),{expatiated:s,isResolved:y}}function b(t,e){return t[y(e)].roll()}function x(t,e,n,{thing:r,keyPathOnSource:a,targetParent:s,targetKey:u}){var c,l=t;a.slice(0,-1).forEach(function(t){l&&(l=l[t])}),c=r.map?d(r,l,a,o(_)(r.map,t),null,n):d(r,l,a,o(i)(t),null,n);var{isResolved:f,expatiated:h}=c;f?s&&u?s[u]=h:l[y(a)]=h:e.push({keyPathOnSource:a,thing:r})}function w(t,{fn:n,parent:r,key:o}){r[o]=n(t,e)}},r:function(t){return{[u]:!0,target:d(t)}},f:function(t){return{[c]:!0,fn:t}},s:function(t){return{[l]:!0,target:d(t)}},m:function({target:t,map:e}){return{[f]:!0,target:t,map:e}},l:function(t){return{[h]:!0,target:t}},d:function(t){return{[p]:!0,target:d(t)}}}},{dicecup:23,"get-at-path":26,"lodash.curry":38,probable:49}],66:[function(t,e,n){e.exports={name:"moif",version:"1.0.12",description:"Simple choice-based adventures.",main:"index.js",private:!0,scripts:{test:"make test"},repository:{type:"git",url:"git@github.com:jimkang/moif.git"},keywords:["cubes"],author:"Jim Kang",license:"BSD",bugs:{url:"https://github.com/jimkang/moif/issues"},homepage:"https://github.com/jimkang/moif",devDependencies:{"@typescript-eslint/eslint-plugin":"^2.7.0","@typescript-eslint/parser":"^2.7.0","babel-preset-es2015":"^6.24.1",babelify:"^7.3.0",browserify:"^14.5.0",eslint:"^6.7.2","uglify-es":"^3.3.9"},dependencies:{"@jimkang/randomid":"^1.0.0","@jimkang/torn-edges":"^2.1.0","@types/node":"^12.12.7",accessor:"^3.0.0","basic-2d-math":"^1.0.1","basic-browser-request":"^9.0.2",csscrown:"^1.0.0","d3-array":"^2.4.0","d3-color":"^1.4.0","d3-drag":"^1.2.5","d3-ease":"^1.0.5","d3-hierarchy":"^1.1.8","d3-interpolate":"^1.3.2","d3-scale-chromatic":"^1.5.0","d3-selection":"^1.3.2","d3-shape":"^1.3.7","d3-transition":"^1.2.0","easy-browser-request":"^1.0.1","errorback-promise":"^1.0.0","handle-error-web":"^1.0.1","lodash.clonedeep":"^4.5.0","lodash.curry":"^4.1.1","lodash.findwhere":"^3.1.0","lodash.flatten":"^4.4.0","lodash.omit":"^4.5.0","lodash.pick":"^4.4.0","lodash.uniq":"^4.5.0","object-path-exists":"^1.0.0","one-listener-per-element":"^1.0.1",probable:"^2.1.4","render-as-nested-list":"^1.0.1","request-body-mover":"^1.0.1","route-state":"^2.0.5",seedrandom:"^3.0.1","standard-bail":"^2.0.1",strokerouter:"^3.0.0",tablenest:"^4.0.0",tsify:"^4.0.1",typescript:"^3.7.2"}}},{}],67:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("basic-browser-request"),o=t("request-body-mover"),i=t("../config"),a="https://smidgeo.com/note-taker/note";n.sendEncounter=function(t,e){var n=t.encounterId,s=t.beatIds,u=t.state,c=t.actionLogs,l=JSON.stringify({encounterId:n,state:u,beatIds:s,actionLogs:c},null,2),f={method:"POST",url:a,json:!0,headers:{Authorization:"Key "+i.playthroughs,"X-Note-Archive":"playthroughs","Content-Type":"application/json"},body:{caption:"<pre>"+l+"</pre>"}};r(f,o(e))}},{"../config":3,"basic-browser-request":16,"request-body-mover":55}]},{},[2]);